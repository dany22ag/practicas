var Ka=Object.create;var jo=Object.defineProperty;var Xa=Object.getOwnPropertyDescriptor;var Qa=Object.getOwnPropertyNames;var Ya=Object.getPrototypeOf,Za=Object.prototype.hasOwnProperty;var T=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var ec=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of Qa(e))!Za.call(t,i)&&i!==n&&jo(t,i,{get:()=>e[i],enumerable:!(r=Xa(e,i))||r.enumerable});return t};var Nn=(t,e,n)=>(n=t!=null?Ka(Ya(t)):{},ec(e||!t||!t.__esModule?jo(n,"default",{value:t,enumerable:!0}):n,t));var On=T(fe=>{"use strict";Object.defineProperty(fe,"__esModule",{value:!0});fe.thenable=fe.typedArray=fe.stringArray=fe.array=fe.func=fe.error=fe.number=fe.string=fe.boolean=void 0;function tc(t){return t===!0||t===!1}fe.boolean=tc;function Fo(t){return typeof t=="string"||t instanceof String}fe.string=Fo;function nc(t){return typeof t=="number"||t instanceof Number}fe.number=nc;function rc(t){return t instanceof Error}fe.error=rc;function Mo(t){return typeof t=="function"}fe.func=Mo;function xo(t){return Array.isArray(t)}fe.array=xo;function ic(t){return xo(t)&&t.every(e=>Fo(e))}fe.stringArray=ic;function oc(t,e){return Array.isArray(t)&&t.every(e)}fe.typedArray=oc;function sc(t){return t&&Mo(t.then)}fe.thenable=sc});var tt=T(Ar=>{"use strict";Object.defineProperty(Ar,"__esModule",{value:!0});var Ir;function Wr(){if(Ir===void 0)throw new Error("No runtime abstraction layer installed");return Ir}(function(t){function e(n){if(n===void 0)throw new Error("No runtime abstraction layer provided");Ir=n}t.install=e})(Wr||(Wr={}));Ar.default=Wr});var Hr=T(en=>{"use strict";Object.defineProperty(en,"__esModule",{value:!0});en.Disposable=void 0;var ac;(function(t){function e(n){return{dispose:n}}t.create=e})(ac=en.Disposable||(en.Disposable={}))});var Lo=T(En=>{"use strict";Object.defineProperty(En,"__esModule",{value:!0});En.AbstractMessageBuffer=void 0;var cc=13,uc=10,lc=`\r
`,zr=class{constructor(e="utf-8"){this._encoding=e,this._chunks=[],this._totalLength=0}get encoding(){return this._encoding}append(e){let n=typeof e=="string"?this.fromString(e,this._encoding):e;this._chunks.push(n),this._totalLength+=n.byteLength}tryReadHeaders(){if(this._chunks.length===0)return;let e=0,n=0,r=0,i=0;e:for(;n<this._chunks.length;){let P=this._chunks[n];r=0;t:for(;r<P.length;){switch(P[r]){case cc:switch(e){case 0:e=1;break;case 2:e=3;break;default:e=0}break;case uc:switch(e){case 1:e=2;break;case 3:e=4,r++;break e;default:e=0}break;default:e=0}r++}i+=P.byteLength,n++}if(e!==4)return;let d=this._read(i+r),y=new Map,_=this.toString(d,"ascii").split(lc);if(_.length<2)return y;for(let P=0;P<_.length-2;P++){let D=_[P],w=D.indexOf(":");if(w===-1)throw new Error("Message header must separate key and value using :");let N=D.substr(0,w),S=D.substr(w+1).trim();y.set(N,S)}return y}tryReadBody(e){if(!(this._totalLength<e))return this._read(e)}get numberOfBytes(){return this._totalLength}_read(e){if(e===0)return this.emptyBuffer();if(e>this._totalLength)throw new Error("Cannot read so many bytes!");if(this._chunks[0].byteLength===e){let d=this._chunks[0];return this._chunks.shift(),this._totalLength-=e,this.asNative(d)}if(this._chunks[0].byteLength>e){let d=this._chunks[0],y=this.asNative(d,e);return this._chunks[0]=d.slice(e),this._totalLength-=e,y}let n=this.allocNative(e),r=0,i=0;for(;e>0;){let d=this._chunks[i];if(d.byteLength>e){let y=d.slice(0,e);n.set(y,r),r+=e,this._chunks[i]=d.slice(e),this._totalLength-=e,e-=e}else n.set(d,r),r+=d.byteLength,this._chunks.shift(),this._totalLength-=d.byteLength,e-=d.byteLength}return n}};En.AbstractMessageBuffer=zr});var Ao=T(Vr=>{"use strict";Object.defineProperty(Vr,"__esModule",{value:!0});var dc=tt(),Io=require("util"),Rt=Hr(),fc=Lo(),Lt=class extends fc.AbstractMessageBuffer{constructor(e="utf-8"){super(e)}emptyBuffer(){return Lt.emptyBuffer}fromString(e,n){return Buffer.from(e,n)}toString(e,n){return e instanceof Buffer?e.toString(n):new Io.TextDecoder(n).decode(e)}asNative(e,n){return n===void 0?e instanceof Buffer?e:Buffer.from(e):e instanceof Buffer?e.slice(0,n):Buffer.from(e,0,n)}allocNative(e){return Buffer.allocUnsafe(e)}};Lt.emptyBuffer=Buffer.allocUnsafe(0);var $r=class{constructor(e){this.stream=e}onClose(e){return this.stream.on("close",e),Rt.Disposable.create(()=>this.stream.off("close",e))}onError(e){return this.stream.on("error",e),Rt.Disposable.create(()=>this.stream.off("error",e))}onEnd(e){return this.stream.on("end",e),Rt.Disposable.create(()=>this.stream.off("end",e))}onData(e){return this.stream.on("data",e),Rt.Disposable.create(()=>this.stream.off("data",e))}},Br=class{constructor(e){this.stream=e}onClose(e){return this.stream.on("close",e),Rt.Disposable.create(()=>this.stream.off("close",e))}onError(e){return this.stream.on("error",e),Rt.Disposable.create(()=>this.stream.off("error",e))}onEnd(e){return this.stream.on("end",e),Rt.Disposable.create(()=>this.stream.off("end",e))}write(e,n){return new Promise((r,i)=>{let d=y=>{y==null?r():i(y)};typeof e=="string"?this.stream.write(e,n,d):this.stream.write(e,d)})}end(){this.stream.end()}},Wo=Object.freeze({messageBuffer:Object.freeze({create:t=>new Lt(t)}),applicationJson:Object.freeze({encoder:Object.freeze({name:"application/json",encode:(t,e)=>{try{return Promise.resolve(Buffer.from(JSON.stringify(t,void 0,0),e.charset))}catch(n){return Promise.reject(n)}}}),decoder:Object.freeze({name:"application/json",decode:(t,e)=>{try{return t instanceof Buffer?Promise.resolve(JSON.parse(t.toString(e.charset))):Promise.resolve(JSON.parse(new Io.TextDecoder(e.charset).decode(t)))}catch(n){return Promise.reject(n)}}})}),stream:Object.freeze({asReadableStream:t=>new $r(t),asWritableStream:t=>new Br(t)}),console,timer:Object.freeze({setTimeout(t,e,...n){let r=setTimeout(t,e,...n);return{dispose:()=>clearTimeout(r)}},setImmediate(t,...e){let n=setImmediate(t,...e);return{dispose:()=>clearImmediate(n)}},setInterval(t,e,...n){let r=setInterval(t,e,...n);return{dispose:()=>clearInterval(r)}}})});function Ur(){return Wo}(function(t){function e(){dc.default.install(Wo)}t.install=e})(Ur||(Ur={}));Vr.default=Ur});var It=T(De=>{"use strict";Object.defineProperty(De,"__esModule",{value:!0});De.stringArray=De.array=De.func=De.error=De.number=De.string=De.boolean=void 0;function hc(t){return t===!0||t===!1}De.boolean=hc;function Ho(t){return typeof t=="string"||t instanceof String}De.string=Ho;function gc(t){return typeof t=="number"||t instanceof Number}De.number=gc;function mc(t){return t instanceof Error}De.error=mc;function pc(t){return typeof t=="function"}De.func=pc;function zo(t){return Array.isArray(t)}De.array=zo;function yc(t){return zo(t)&&t.every(e=>Ho(e))}De.stringArray=yc});var mi=T(E=>{"use strict";Object.defineProperty(E,"__esModule",{value:!0});E.Message=E.NotificationType9=E.NotificationType8=E.NotificationType7=E.NotificationType6=E.NotificationType5=E.NotificationType4=E.NotificationType3=E.NotificationType2=E.NotificationType1=E.NotificationType0=E.NotificationType=E.RequestType9=E.RequestType8=E.RequestType7=E.RequestType6=E.RequestType5=E.RequestType4=E.RequestType3=E.RequestType2=E.RequestType1=E.RequestType=E.RequestType0=E.AbstractMessageSignature=E.ParameterStructures=E.ResponseError=E.ErrorCodes=void 0;var _t=It(),$o;(function(t){t.ParseError=-32700,t.InvalidRequest=-32600,t.MethodNotFound=-32601,t.InvalidParams=-32602,t.InternalError=-32603,t.jsonrpcReservedErrorRangeStart=-32099,t.serverErrorStart=-32099,t.MessageWriteError=-32099,t.MessageReadError=-32098,t.PendingResponseRejected=-32097,t.ConnectionInactive=-32096,t.ServerNotInitialized=-32002,t.UnknownErrorCode=-32001,t.jsonrpcReservedErrorRangeEnd=-32e3,t.serverErrorEnd=-32e3})($o=E.ErrorCodes||(E.ErrorCodes={}));var tn=class extends Error{constructor(e,n,r){super(n),this.code=_t.number(e)?e:$o.UnknownErrorCode,this.data=r,Object.setPrototypeOf(this,tn.prototype)}toJson(){let e={code:this.code,message:this.message};return this.data!==void 0&&(e.data=this.data),e}};E.ResponseError=tn;var ye=class{constructor(e){this.kind=e}static is(e){return e===ye.auto||e===ye.byName||e===ye.byPosition}toString(){return this.kind}};E.ParameterStructures=ye;ye.auto=new ye("auto");ye.byPosition=new ye("byPosition");ye.byName=new ye("byName");var ie=class{constructor(e,n){this.method=e,this.numberOfParams=n}get parameterStructures(){return ye.auto}};E.AbstractMessageSignature=ie;var Jr=class extends ie{constructor(e){super(e,0)}};E.RequestType0=Jr;var Gr=class extends ie{constructor(e,n=ye.auto){super(e,1),this._parameterStructures=n}get parameterStructures(){return this._parameterStructures}};E.RequestType=Gr;var Kr=class extends ie{constructor(e,n=ye.auto){super(e,1),this._parameterStructures=n}get parameterStructures(){return this._parameterStructures}};E.RequestType1=Kr;var Xr=class extends ie{constructor(e){super(e,2)}};E.RequestType2=Xr;var Qr=class extends ie{constructor(e){super(e,3)}};E.RequestType3=Qr;var Yr=class extends ie{constructor(e){super(e,4)}};E.RequestType4=Yr;var Zr=class extends ie{constructor(e){super(e,5)}};E.RequestType5=Zr;var ei=class extends ie{constructor(e){super(e,6)}};E.RequestType6=ei;var ti=class extends ie{constructor(e){super(e,7)}};E.RequestType7=ti;var ni=class extends ie{constructor(e){super(e,8)}};E.RequestType8=ni;var ri=class extends ie{constructor(e){super(e,9)}};E.RequestType9=ri;var ii=class extends ie{constructor(e,n=ye.auto){super(e,1),this._parameterStructures=n}get parameterStructures(){return this._parameterStructures}};E.NotificationType=ii;var oi=class extends ie{constructor(e){super(e,0)}};E.NotificationType0=oi;var si=class extends ie{constructor(e,n=ye.auto){super(e,1),this._parameterStructures=n}get parameterStructures(){return this._parameterStructures}};E.NotificationType1=si;var ai=class extends ie{constructor(e){super(e,2)}};E.NotificationType2=ai;var ci=class extends ie{constructor(e){super(e,3)}};E.NotificationType3=ci;var ui=class extends ie{constructor(e){super(e,4)}};E.NotificationType4=ui;var li=class extends ie{constructor(e){super(e,5)}};E.NotificationType5=li;var di=class extends ie{constructor(e){super(e,6)}};E.NotificationType6=di;var fi=class extends ie{constructor(e){super(e,7)}};E.NotificationType7=fi;var hi=class extends ie{constructor(e){super(e,8)}};E.NotificationType8=hi;var gi=class extends ie{constructor(e){super(e,9)}};E.NotificationType9=gi;var bc;(function(t){function e(i){let d=i;return d&&_t.string(d.method)&&(_t.string(d.id)||_t.number(d.id))}t.isRequest=e;function n(i){let d=i;return d&&_t.string(d.method)&&i.id===void 0}t.isNotification=n;function r(i){let d=i;return d&&(d.result!==void 0||!!d.error)&&(_t.string(d.id)||_t.number(d.id)||d.id===null)}t.isResponse=r})(bc=E.Message||(E.Message={}))});var yi=T(nt=>{"use strict";var Bo;Object.defineProperty(nt,"__esModule",{value:!0});nt.LRUCache=nt.LinkedMap=nt.Touch=void 0;var we;(function(t){t.None=0,t.First=1,t.AsOld=t.First,t.Last=2,t.AsNew=t.Last})(we=nt.Touch||(nt.Touch={}));var jn=class{constructor(){this[Bo]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){return this._head?.value}get last(){return this._tail?.value}has(e){return this._map.has(e)}get(e,n=we.None){let r=this._map.get(e);if(!!r)return n!==we.None&&this.touch(r,n),r.value}set(e,n,r=we.None){let i=this._map.get(e);if(i)i.value=n,r!==we.None&&this.touch(i,r);else{switch(i={key:e,value:n,next:void 0,previous:void 0},r){case we.None:this.addItemLast(i);break;case we.First:this.addItemFirst(i);break;case we.Last:this.addItemLast(i);break;default:this.addItemLast(i);break}this._map.set(e,i),this._size++}return this}delete(e){return!!this.remove(e)}remove(e){let n=this._map.get(e);if(!!n)return this._map.delete(e),this.removeItem(n),this._size--,n.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");let e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,n){let r=this._state,i=this._head;for(;i;){if(n?e.bind(n)(i.value,i.key,this):e(i.value,i.key,this),this._state!==r)throw new Error("LinkedMap got modified during iteration.");i=i.next}}keys(){let e=this._state,n=this._head,r={[Symbol.iterator]:()=>r,next:()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(n){let i={value:n.key,done:!1};return n=n.next,i}else return{value:void 0,done:!0}}};return r}values(){let e=this._state,n=this._head,r={[Symbol.iterator]:()=>r,next:()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(n){let i={value:n.value,done:!1};return n=n.next,i}else return{value:void 0,done:!0}}};return r}entries(){let e=this._state,n=this._head,r={[Symbol.iterator]:()=>r,next:()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(n){let i={value:[n.key,n.value],done:!1};return n=n.next,i}else return{value:void 0,done:!0}}};return r}[(Bo=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(e){if(e>=this.size)return;if(e===0){this.clear();return}let n=this._head,r=this.size;for(;n&&r>e;)this._map.delete(n.key),n=n.next,r--;this._head=n,this._size=r,n&&(n.previous=void 0),this._state++}addItemFirst(e){if(!this._head&&!this._tail)this._tail=e;else if(this._head)e.next=this._head,this._head.previous=e;else throw new Error("Invalid list");this._head=e,this._state++}addItemLast(e){if(!this._head&&!this._tail)this._head=e;else if(this._tail)e.previous=this._tail,this._tail.next=e;else throw new Error("Invalid list");this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{let n=e.next,r=e.previous;if(!n||!r)throw new Error("Invalid list");n.previous=r,r.next=n}e.next=void 0,e.previous=void 0,this._state++}touch(e,n){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(n!==we.First&&n!==we.Last)){if(n===we.First){if(e===this._head)return;let r=e.next,i=e.previous;e===this._tail?(i.next=void 0,this._tail=i):(r.previous=i,i.next=r),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(n===we.Last){if(e===this._tail)return;let r=e.next,i=e.previous;e===this._head?(r.previous=void 0,this._head=r):(r.previous=i,i.next=r),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}}toJSON(){let e=[];return this.forEach((n,r)=>{e.push([r,n])}),e}fromJSON(e){this.clear();for(let[n,r]of e)this.set(n,r)}};nt.LinkedMap=jn;var pi=class extends jn{constructor(e,n=1){super(),this._limit=e,this._ratio=Math.min(Math.max(0,n),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get ratio(){return this._ratio}set ratio(e){this._ratio=Math.min(Math.max(0,e),1),this.checkTrim()}get(e,n=we.AsNew){return super.get(e,n)}peek(e){return super.get(e,we.None)}set(e,n){return super.set(e,n,we.Last),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}};nt.LRUCache=pi});var At=T(Dt=>{"use strict";Object.defineProperty(Dt,"__esModule",{value:!0});Dt.Emitter=Dt.Event=void 0;var vc=tt(),Rc;(function(t){let e={dispose(){}};t.None=function(){return e}})(Rc=Dt.Event||(Dt.Event={}));var bi=class{add(e,n=null,r){this._callbacks||(this._callbacks=[],this._contexts=[]),this._callbacks.push(e),this._contexts.push(n),Array.isArray(r)&&r.push({dispose:()=>this.remove(e,n)})}remove(e,n=null){if(!this._callbacks)return;let r=!1;for(let i=0,d=this._callbacks.length;i<d;i++)if(this._callbacks[i]===e)if(this._contexts[i]===n){this._callbacks.splice(i,1),this._contexts.splice(i,1);return}else r=!0;if(r)throw new Error("When adding a listener with a context, you should remove it with the same context")}invoke(...e){if(!this._callbacks)return[];let n=[],r=this._callbacks.slice(0),i=this._contexts.slice(0);for(let d=0,y=r.length;d<y;d++)try{n.push(r[d].apply(i[d],e))}catch(_){(0,vc.default)().console.error(_)}return n}isEmpty(){return!this._callbacks||this._callbacks.length===0}dispose(){this._callbacks=void 0,this._contexts=void 0}},Wt=class{constructor(e){this._options=e}get event(){return this._event||(this._event=(e,n,r)=>{this._callbacks||(this._callbacks=new bi),this._options&&this._options.onFirstListenerAdd&&this._callbacks.isEmpty()&&this._options.onFirstListenerAdd(this),this._callbacks.add(e,n);let i={dispose:()=>{!this._callbacks||(this._callbacks.remove(e,n),i.dispose=Wt._noop,this._options&&this._options.onLastListenerRemove&&this._callbacks.isEmpty()&&this._options.onLastListenerRemove(this))}};return Array.isArray(r)&&r.push(i),i}),this._event}fire(e){this._callbacks&&this._callbacks.invoke.call(this._callbacks,e)}dispose(){this._callbacks&&(this._callbacks.dispose(),this._callbacks=void 0)}};Dt.Emitter=Wt;Wt._noop=function(){}});var Di=T(qt=>{"use strict";Object.defineProperty(qt,"__esModule",{value:!0});qt.CancellationTokenSource=qt.CancellationToken=void 0;var _c=tt(),Dc=It(),vi=At(),Ri;(function(t){t.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:vi.Event.None}),t.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:vi.Event.None});function e(n){let r=n;return r&&(r===t.None||r===t.Cancelled||Dc.boolean(r.isCancellationRequested)&&!!r.onCancellationRequested)}t.is=e})(Ri=qt.CancellationToken||(qt.CancellationToken={}));var qc=Object.freeze(function(t,e){let n=(0,_c.default)().timer.setTimeout(t.bind(e),0);return{dispose(){n.dispose()}}}),Fn=class{constructor(){this._isCancelled=!1}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?qc:(this._emitter||(this._emitter=new vi.Emitter),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=void 0)}},_i=class{get token(){return this._token||(this._token=new Fn),this._token}cancel(){this._token?this._token.cancel():this._token=Ri.Cancelled}dispose(){this._token?this._token instanceof Fn&&this._token.dispose():this._token=Ri.None}};qt.CancellationTokenSource=_i});var Uo=T(rt=>{"use strict";Object.defineProperty(rt,"__esModule",{value:!0});rt.ReadableStreamMessageReader=rt.AbstractMessageReader=rt.MessageReader=void 0;var wi=tt(),Ht=It(),qi=At(),wc;(function(t){function e(n){let r=n;return r&&Ht.func(r.listen)&&Ht.func(r.dispose)&&Ht.func(r.onError)&&Ht.func(r.onClose)&&Ht.func(r.onPartialMessage)}t.is=e})(wc=rt.MessageReader||(rt.MessageReader={}));var Mn=class{constructor(){this.errorEmitter=new qi.Emitter,this.closeEmitter=new qi.Emitter,this.partialMessageEmitter=new qi.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e){this.errorEmitter.fire(this.asError(e))}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}get onPartialMessage(){return this.partialMessageEmitter.event}firePartialMessage(e){this.partialMessageEmitter.fire(e)}asError(e){return e instanceof Error?e:new Error(`Reader received error. Reason: ${Ht.string(e.message)?e.message:"unknown"}`)}};rt.AbstractMessageReader=Mn;var Pi;(function(t){function e(n){let r,i,d,y=new Map,_,P=new Map;if(n===void 0||typeof n=="string")r=n??"utf-8";else{if(r=n.charset??"utf-8",n.contentDecoder!==void 0&&(d=n.contentDecoder,y.set(d.name,d)),n.contentDecoders!==void 0)for(let D of n.contentDecoders)y.set(D.name,D);if(n.contentTypeDecoder!==void 0&&(_=n.contentTypeDecoder,P.set(_.name,_)),n.contentTypeDecoders!==void 0)for(let D of n.contentTypeDecoders)P.set(D.name,D)}return _===void 0&&(_=(0,wi.default)().applicationJson.decoder,P.set(_.name,_)),{charset:r,contentDecoder:d,contentDecoders:y,contentTypeDecoder:_,contentTypeDecoders:P}}t.fromOptions=e})(Pi||(Pi={}));var ki=class extends Mn{constructor(e,n){super(),this.readable=e,this.options=Pi.fromOptions(n),this.buffer=(0,wi.default)().messageBuffer.create(this.options.charset),this._partialMessageTimeout=1e4,this.nextMessageLength=-1,this.messageToken=0}set partialMessageTimeout(e){this._partialMessageTimeout=e}get partialMessageTimeout(){return this._partialMessageTimeout}listen(e){this.nextMessageLength=-1,this.messageToken=0,this.partialMessageTimer=void 0,this.callback=e;let n=this.readable.onData(r=>{this.onData(r)});return this.readable.onError(r=>this.fireError(r)),this.readable.onClose(()=>this.fireClose()),n}onData(e){for(this.buffer.append(e);;){if(this.nextMessageLength===-1){let i=this.buffer.tryReadHeaders();if(!i)return;let d=i.get("Content-Length");if(!d)throw new Error("Header must provide a Content-Length property.");let y=parseInt(d);if(isNaN(y))throw new Error("Content-Length value must be a number.");this.nextMessageLength=y}let n=this.buffer.tryReadBody(this.nextMessageLength);if(n===void 0){this.setPartialMessageTimer();return}this.clearPartialMessageTimer(),this.nextMessageLength=-1;let r;this.options.contentDecoder!==void 0?r=this.options.contentDecoder.decode(n):r=Promise.resolve(n),r.then(i=>{this.options.contentTypeDecoder.decode(i,this.options).then(d=>{this.callback(d)},d=>{this.fireError(d)})},i=>{this.fireError(i)})}}clearPartialMessageTimer(){this.partialMessageTimer&&(this.partialMessageTimer.dispose(),this.partialMessageTimer=void 0)}setPartialMessageTimer(){this.clearPartialMessageTimer(),!(this._partialMessageTimeout<=0)&&(this.partialMessageTimer=(0,wi.default)().timer.setTimeout((e,n)=>{this.partialMessageTimer=void 0,e===this.messageToken&&(this.firePartialMessage({messageToken:e,waitingTime:n}),this.setPartialMessageTimer())},this._partialMessageTimeout,this.messageToken,this._partialMessageTimeout))}};rt.ReadableStreamMessageReader=ki});var Vo=T(xn=>{"use strict";Object.defineProperty(xn,"__esModule",{value:!0});xn.Semaphore=void 0;var Pc=tt(),Ci=class{constructor(e=1){if(e<=0)throw new Error("Capacity must be greater than 0");this._capacity=e,this._active=0,this._waiting=[]}lock(e){return new Promise((n,r)=>{this._waiting.push({thunk:e,resolve:n,reject:r}),this.runNext()})}get active(){return this._active}runNext(){this._waiting.length===0||this._active===this._capacity||(0,Pc.default)().timer.setImmediate(()=>this.doRunNext())}doRunNext(){if(this._waiting.length===0||this._active===this._capacity)return;let e=this._waiting.shift();if(this._active++,this._active>this._capacity)throw new Error("To many thunks active");try{let n=e.thunk();n instanceof Promise?n.then(r=>{this._active--,e.resolve(r),this.runNext()},r=>{this._active--,e.reject(r),this.runNext()}):(this._active--,e.resolve(n),this.runNext())}catch(n){this._active--,e.reject(n),this.runNext()}}};xn.Semaphore=Ci});var Xo=T(it=>{"use strict";Object.defineProperty(it,"__esModule",{value:!0});it.WriteableStreamMessageWriter=it.AbstractMessageWriter=it.MessageWriter=void 0;var Jo=tt(),nn=It(),kc=Vo(),Go=At(),Cc="Content-Length: ",Ko=`\r
`,Tc;(function(t){function e(n){let r=n;return r&&nn.func(r.dispose)&&nn.func(r.onClose)&&nn.func(r.onError)&&nn.func(r.write)}t.is=e})(Tc=it.MessageWriter||(it.MessageWriter={}));var Ln=class{constructor(){this.errorEmitter=new Go.Emitter,this.closeEmitter=new Go.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e,n,r){this.errorEmitter.fire([this.asError(e),n,r])}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}asError(e){return e instanceof Error?e:new Error(`Writer received error. Reason: ${nn.string(e.message)?e.message:"unknown"}`)}};it.AbstractMessageWriter=Ln;var Ti;(function(t){function e(n){return n===void 0||typeof n=="string"?{charset:n??"utf-8",contentTypeEncoder:(0,Jo.default)().applicationJson.encoder}:{charset:n.charset??"utf-8",contentEncoder:n.contentEncoder,contentTypeEncoder:n.contentTypeEncoder??(0,Jo.default)().applicationJson.encoder}}t.fromOptions=e})(Ti||(Ti={}));var Si=class extends Ln{constructor(e,n){super(),this.writable=e,this.options=Ti.fromOptions(n),this.errorCount=0,this.writeSemaphore=new kc.Semaphore(1),this.writable.onError(r=>this.fireError(r)),this.writable.onClose(()=>this.fireClose())}async write(e){return this.writeSemaphore.lock(async()=>this.options.contentTypeEncoder.encode(e,this.options).then(r=>this.options.contentEncoder!==void 0?this.options.contentEncoder.encode(r):r).then(r=>{let i=[];return i.push(Cc,r.byteLength.toString(),Ko),i.push(Ko),this.doWrite(e,i,r)},r=>{throw this.fireError(r),r}))}async doWrite(e,n,r){try{return await this.writable.write(n.join(""),"ascii"),this.writable.write(r)}catch(i){return this.handleError(i,e),Promise.reject(i)}}handleError(e,n){this.errorCount++,this.fireError(e,n,this.errorCount)}end(){this.writable.end()}};it.WriteableStreamMessageWriter=Si});var ns=T(F=>{"use strict";Object.defineProperty(F,"__esModule",{value:!0});F.createMessageConnection=F.ConnectionOptions=F.CancellationStrategy=F.CancellationSenderStrategy=F.CancellationReceiverStrategy=F.ConnectionStrategy=F.ConnectionError=F.ConnectionErrors=F.LogTraceNotification=F.SetTraceNotification=F.TraceFormat=F.Trace=F.NullLogger=F.ProgressType=F.ProgressToken=void 0;var Qo=tt(),me=It(),j=mi(),Yo=yi(),rn=At(),Ni=Di(),sn;(function(t){t.type=new j.NotificationType("$/cancelRequest")})(sn||(sn={}));var Zo;(function(t){function e(n){return typeof n=="string"||typeof n=="number"}t.is=e})(Zo=F.ProgressToken||(F.ProgressToken={}));var on;(function(t){t.type=new j.NotificationType("$/progress")})(on||(on={}));var Oi=class{constructor(){}};F.ProgressType=Oi;var Ei;(function(t){function e(n){return me.func(n)}t.is=e})(Ei||(Ei={}));F.NullLogger=Object.freeze({error:()=>{},warn:()=>{},info:()=>{},log:()=>{}});var Q;(function(t){t[t.Off=0]="Off",t[t.Messages=1]="Messages",t[t.Compact=2]="Compact",t[t.Verbose=3]="Verbose"})(Q=F.Trace||(F.Trace={}));(function(t){function e(r){if(!me.string(r))return t.Off;switch(r=r.toLowerCase(),r){case"off":return t.Off;case"messages":return t.Messages;case"compact":return t.Compact;case"verbose":return t.Verbose;default:return t.Off}}t.fromString=e;function n(r){switch(r){case t.Off:return"off";case t.Messages:return"messages";case t.Compact:return"compact";case t.Verbose:return"verbose";default:return"off"}}t.toString=n})(Q=F.Trace||(F.Trace={}));var Le;(function(t){t.Text="text",t.JSON="json"})(Le=F.TraceFormat||(F.TraceFormat={}));(function(t){function e(n){return me.string(n)?(n=n.toLowerCase(),n==="json"?t.JSON:t.Text):t.Text}t.fromString=e})(Le=F.TraceFormat||(F.TraceFormat={}));var es;(function(t){t.type=new j.NotificationType("$/setTrace")})(es=F.SetTraceNotification||(F.SetTraceNotification={}));var ji;(function(t){t.type=new j.NotificationType("$/logTrace")})(ji=F.LogTraceNotification||(F.LogTraceNotification={}));var In;(function(t){t[t.Closed=1]="Closed",t[t.Disposed=2]="Disposed",t[t.AlreadyListening=3]="AlreadyListening"})(In=F.ConnectionErrors||(F.ConnectionErrors={}));var ct=class extends Error{constructor(e,n){super(n),this.code=e,Object.setPrototypeOf(this,ct.prototype)}};F.ConnectionError=ct;var ts;(function(t){function e(n){let r=n;return r&&me.func(r.cancelUndispatched)}t.is=e})(ts=F.ConnectionStrategy||(F.ConnectionStrategy={}));var Fi;(function(t){t.Message=Object.freeze({createCancellationTokenSource(n){return new Ni.CancellationTokenSource}});function e(n){let r=n;return r&&me.func(r.createCancellationTokenSource)}t.is=e})(Fi=F.CancellationReceiverStrategy||(F.CancellationReceiverStrategy={}));var Mi;(function(t){t.Message=Object.freeze({sendCancellation(n,r){return n.sendNotification(sn.type,{id:r})},cleanup(n){}});function e(n){let r=n;return r&&me.func(r.sendCancellation)&&me.func(r.cleanup)}t.is=e})(Mi=F.CancellationSenderStrategy||(F.CancellationSenderStrategy={}));var xi;(function(t){t.Message=Object.freeze({receiver:Fi.Message,sender:Mi.Message});function e(n){let r=n;return r&&Fi.is(r.receiver)&&Mi.is(r.sender)}t.is=e})(xi=F.CancellationStrategy||(F.CancellationStrategy={}));var Sc;(function(t){function e(n){let r=n;return r&&(xi.is(r.cancellationStrategy)||ts.is(r.connectionStrategy))}t.is=e})(Sc=F.ConnectionOptions||(F.ConnectionOptions={}));var Ie;(function(t){t[t.New=1]="New",t[t.Listening=2]="Listening",t[t.Closed=3]="Closed",t[t.Disposed=4]="Disposed"})(Ie||(Ie={}));function Nc(t,e,n,r){let i=n!==void 0?n:F.NullLogger,d=0,y=0,_=0,P="2.0",D,w=new Map,N,S=new Map,H=new Map,U,z=new Yo.LinkedMap,X=new Map,M=new Set,p=new Map,h=Q.Off,q=Le.Text,x,re=Ie.New,ue=new rn.Emitter,Ve=new rn.Emitter,Nt=new rn.Emitter,pt=new rn.Emitter,yt=new rn.Emitter,Ye=r&&r.cancellationStrategy?r.cancellationStrategy:xi.Message;function Xt(u){if(u===null)throw new Error("Can't send requests with id null since the response can't be correlated.");return"req-"+u.toString()}function Ot(u){return u===null?"res-unknown-"+(++_).toString():"res-"+u.toString()}function wn(){return"not-"+(++y).toString()}function qr(u,R){j.Message.isRequest(R)?u.set(Xt(R.id),R):j.Message.isResponse(R)?u.set(Ot(R.id),R):u.set(wn(),R)}function wr(u){}function Pn(){return re===Ie.Listening}function Et(){return re===Ie.Closed}function ot(){return re===Ie.Disposed}function Qt(){(re===Ie.New||re===Ie.Listening)&&(re=Ie.Closed,Ve.fire(void 0))}function jt(u){ue.fire([u,void 0,void 0])}function Pr(u){ue.fire(u)}t.onClose(Qt),t.onError(jt),e.onClose(Qt),e.onError(Pr);function kn(){U||z.size===0||(U=(0,Qo.default)().timer.setImmediate(()=>{U=void 0,kr()}))}function kr(){if(z.size===0)return;let u=z.shift();try{j.Message.isRequest(u)?Tr(u):j.Message.isNotification(u)?Nr(u):j.Message.isResponse(u)?Sr(u):Or(u)}finally{kn()}}let Cr=u=>{try{if(j.Message.isNotification(u)&&u.method===sn.type.method){let R=u.params.id,k=Xt(R),O=z.get(k);if(j.Message.isRequest(O)){let Z=r?.connectionStrategy,oe=Z&&Z.cancelUndispatched?Z.cancelUndispatched(O,wr):void 0;if(oe&&(oe.error!==void 0||oe.result!==void 0)){z.delete(k),p.delete(R),oe.id=O.id,Ft(oe,u.method,Date.now()),e.write(oe).catch(()=>i.error("Sending response for canceled message failed."));return}}let Y=p.get(R);if(Y!==void 0){Y.cancel(),Yt(u);return}else M.add(R)}qr(z,u)}finally{kn()}};function Tr(u){if(ot())return;function R($,ee,J){let le={jsonrpc:P,id:u.id};$ instanceof j.ResponseError?le.error=$.toJson():le.result=$===void 0?null:$,Ft(le,ee,J),e.write(le).catch(()=>i.error("Sending response failed."))}function k($,ee,J){let le={jsonrpc:P,id:u.id,error:$.toJson()};Ft(le,ee,J),e.write(le).catch(()=>i.error("Sending response failed."))}function O($,ee,J){$===void 0&&($=null);let le={jsonrpc:P,id:u.id,result:$};Ft(le,ee,J),e.write(le).catch(()=>i.error("Sending response failed."))}Fr(u);let Y=w.get(u.method),Z,oe;Y&&(Z=Y.type,oe=Y.handler);let de=Date.now();if(oe||D){let $=u.id??String(Date.now()),ee=Ye.receiver.createCancellationTokenSource($);u.id!==null&&M.has(u.id)&&ee.cancel(),u.id!==null&&p.set($,ee);try{let J;if(oe)if(u.params===void 0){if(Z!==void 0&&Z.numberOfParams!==0){k(new j.ResponseError(j.ErrorCodes.InvalidParams,`Request ${u.method} defines ${Z.numberOfParams} params but received none.`),u.method,de);return}J=oe(ee.token)}else if(Array.isArray(u.params)){if(Z!==void 0&&Z.parameterStructures===j.ParameterStructures.byName){k(new j.ResponseError(j.ErrorCodes.InvalidParams,`Request ${u.method} defines parameters by name but received parameters by position`),u.method,de);return}J=oe(...u.params,ee.token)}else{if(Z!==void 0&&Z.parameterStructures===j.ParameterStructures.byPosition){k(new j.ResponseError(j.ErrorCodes.InvalidParams,`Request ${u.method} defines parameters by position but received parameters by name`),u.method,de);return}J=oe(u.params,ee.token)}else D&&(J=D(u.method,u.params,ee.token));let le=J;J?le.then?le.then(_e=>{p.delete($),R(_e,u.method,de)},_e=>{p.delete($),_e instanceof j.ResponseError?k(_e,u.method,de):_e&&me.string(_e.message)?k(new j.ResponseError(j.ErrorCodes.InternalError,`Request ${u.method} failed with message: ${_e.message}`),u.method,de):k(new j.ResponseError(j.ErrorCodes.InternalError,`Request ${u.method} failed unexpectedly without providing any details.`),u.method,de)}):(p.delete($),R(J,u.method,de)):(p.delete($),O(J,u.method,de))}catch(J){p.delete($),J instanceof j.ResponseError?R(J,u.method,de):J&&me.string(J.message)?k(new j.ResponseError(j.ErrorCodes.InternalError,`Request ${u.method} failed with message: ${J.message}`),u.method,de):k(new j.ResponseError(j.ErrorCodes.InternalError,`Request ${u.method} failed unexpectedly without providing any details.`),u.method,de)}}else k(new j.ResponseError(j.ErrorCodes.MethodNotFound,`Unhandled method ${u.method}`),u.method,de)}function Sr(u){if(!ot())if(u.id===null)u.error?i.error(`Received response message without id: Error is: 
${JSON.stringify(u.error,void 0,4)}`):i.error("Received response message without id. No further error information provided.");else{let R=u.id,k=X.get(R);if(Mr(u,k),k!==void 0){X.delete(R);try{if(u.error){let O=u.error;k.reject(new j.ResponseError(O.code,O.message,O.data))}else if(u.result!==void 0)k.resolve(u.result);else throw new Error("Should never happen.")}catch(O){O.message?i.error(`Response handler '${k.method}' failed with message: ${O.message}`):i.error(`Response handler '${k.method}' failed unexpectedly.`)}}}}function Nr(u){if(ot())return;let R,k;if(u.method===sn.type.method){let O=u.params.id;M.delete(O),Yt(u);return}else{let O=S.get(u.method);O&&(k=O.handler,R=O.type)}if(k||N)try{if(Yt(u),k)if(u.params===void 0)R!==void 0&&R.numberOfParams!==0&&R.parameterStructures!==j.ParameterStructures.byName&&i.error(`Notification ${u.method} defines ${R.numberOfParams} params but received none.`),k();else if(Array.isArray(u.params)){let O=u.params;u.method===on.type.method&&O.length===2&&Zo.is(O[0])?k({token:O[0],value:O[1]}):(R!==void 0&&(R.parameterStructures===j.ParameterStructures.byName&&i.error(`Notification ${u.method} defines parameters by name but received parameters by position`),R.numberOfParams!==u.params.length&&i.error(`Notification ${u.method} defines ${R.numberOfParams} params but received ${O.length} arguments`)),k(...O))}else R!==void 0&&R.parameterStructures===j.ParameterStructures.byPosition&&i.error(`Notification ${u.method} defines parameters by position but received parameters by name`),k(u.params);else N&&N(u.method,u.params)}catch(O){O.message?i.error(`Notification handler '${u.method}' failed with message: ${O.message}`):i.error(`Notification handler '${u.method}' failed unexpectedly.`)}else Nt.fire(u)}function Or(u){if(!u){i.error("Received empty message.");return}i.error(`Received message which is neither a response nor a notification message:
${JSON.stringify(u,null,4)}`);let R=u;if(me.string(R.id)||me.number(R.id)){let k=R.id,O=X.get(k);O&&O.reject(new Error("The received response has neither a result nor an error property."))}}function Ne(u){if(u!=null)switch(h){case Q.Verbose:return JSON.stringify(u,null,4);case Q.Compact:return JSON.stringify(u);default:return}}function Er(u){if(!(h===Q.Off||!x))if(q===Le.Text){let R;(h===Q.Verbose||h===Q.Compact)&&u.params&&(R=`Params: ${Ne(u.params)}

`),x.log(`Sending request '${u.method} - (${u.id})'.`,R)}else st("send-request",u)}function jr(u){if(!(h===Q.Off||!x))if(q===Le.Text){let R;(h===Q.Verbose||h===Q.Compact)&&(u.params?R=`Params: ${Ne(u.params)}

`:R=`No parameters provided.

`),x.log(`Sending notification '${u.method}'.`,R)}else st("send-notification",u)}function Ft(u,R,k){if(!(h===Q.Off||!x))if(q===Le.Text){let O;(h===Q.Verbose||h===Q.Compact)&&(u.error&&u.error.data?O=`Error data: ${Ne(u.error.data)}

`:u.result?O=`Result: ${Ne(u.result)}

`:u.error===void 0&&(O=`No result returned.

`)),x.log(`Sending response '${R} - (${u.id})'. Processing request took ${Date.now()-k}ms`,O)}else st("send-response",u)}function Fr(u){if(!(h===Q.Off||!x))if(q===Le.Text){let R;(h===Q.Verbose||h===Q.Compact)&&u.params&&(R=`Params: ${Ne(u.params)}

`),x.log(`Received request '${u.method} - (${u.id})'.`,R)}else st("receive-request",u)}function Yt(u){if(!(h===Q.Off||!x||u.method===ji.type.method))if(q===Le.Text){let R;(h===Q.Verbose||h===Q.Compact)&&(u.params?R=`Params: ${Ne(u.params)}

`:R=`No parameters provided.

`),x.log(`Received notification '${u.method}'.`,R)}else st("receive-notification",u)}function Mr(u,R){if(!(h===Q.Off||!x))if(q===Le.Text){let k;if((h===Q.Verbose||h===Q.Compact)&&(u.error&&u.error.data?k=`Error data: ${Ne(u.error.data)}

`:u.result?k=`Result: ${Ne(u.result)}

`:u.error===void 0&&(k=`No result returned.

`)),R){let O=u.error?` Request failed: ${u.error.message} (${u.error.code}).`:"";x.log(`Received response '${R.method} - (${u.id})' in ${Date.now()-R.timerStart}ms.${O}`,k)}else x.log(`Received response ${u.id} without active response promise.`,k)}else st("receive-response",u)}function st(u,R){if(!x||h===Q.Off)return;let k={isLSPMessage:!0,type:u,message:R,timestamp:Date.now()};x.log(k)}function bt(){if(Et())throw new ct(In.Closed,"Connection is closed.");if(ot())throw new ct(In.Disposed,"Connection is disposed.")}function xr(){if(Pn())throw new ct(In.AlreadyListening,"Connection is already listening")}function Lr(){if(!Pn())throw new Error("Call listen() first.")}function vt(u){return u===void 0?null:u}function Mt(u){if(u!==null)return u}function Cn(u){return u!=null&&!Array.isArray(u)&&typeof u=="object"}function Zt(u,R){switch(u){case j.ParameterStructures.auto:return Cn(R)?Mt(R):[vt(R)];case j.ParameterStructures.byName:if(!Cn(R))throw new Error("Received parameters by name but param is not an object literal.");return Mt(R);case j.ParameterStructures.byPosition:return[vt(R)];default:throw new Error(`Unknown parameter structure ${u.toString()}`)}}function Tn(u,R){let k,O=u.numberOfParams;switch(O){case 0:k=void 0;break;case 1:k=Zt(u.parameterStructures,R[0]);break;default:k=[];for(let Y=0;Y<R.length&&Y<O;Y++)k.push(vt(R[Y]));if(R.length<O)for(let Y=R.length;Y<O;Y++)k.push(null);break}return k}let at={sendNotification:(u,...R)=>{bt();let k,O;if(me.string(u)){k=u;let Z=R[0],oe=0,de=j.ParameterStructures.auto;j.ParameterStructures.is(Z)&&(oe=1,de=Z);let $=R.length,ee=$-oe;switch(ee){case 0:O=void 0;break;case 1:O=Zt(de,R[oe]);break;default:if(de===j.ParameterStructures.byName)throw new Error(`Received ${ee} parameters for 'by Name' notification parameter structure.`);O=R.slice(oe,$).map(J=>vt(J));break}}else{let Z=R;k=u.method,O=Tn(u,Z)}let Y={jsonrpc:P,method:k,params:O};return jr(Y),e.write(Y).catch(()=>i.error("Sending notification failed."))},onNotification:(u,R)=>{bt();let k;return me.func(u)?N=u:R&&(me.string(u)?(k=u,S.set(u,{type:void 0,handler:R})):(k=u.method,S.set(u.method,{type:u,handler:R}))),{dispose:()=>{k!==void 0?S.delete(k):N=void 0}}},onProgress:(u,R,k)=>{if(H.has(R))throw new Error(`Progress handler for token ${R} already registered`);return H.set(R,k),{dispose:()=>{H.delete(R)}}},sendProgress:(u,R,k)=>at.sendNotification(on.type,{token:R,value:k}),onUnhandledProgress:pt.event,sendRequest:(u,...R)=>{bt(),Lr();let k,O,Y;if(me.string(u)){k=u;let $=R[0],ee=R[R.length-1],J=0,le=j.ParameterStructures.auto;j.ParameterStructures.is($)&&(J=1,le=$);let _e=R.length;Ni.CancellationToken.is(ee)&&(_e=_e-1,Y=ee);let Ze=_e-J;switch(Ze){case 0:O=void 0;break;case 1:O=Zt(le,R[J]);break;default:if(le===j.ParameterStructures.byName)throw new Error(`Received ${Ze} parameters for 'by Name' request parameter structure.`);O=R.slice(J,_e).map(Je=>vt(Je));break}}else{let $=R;k=u.method,O=Tn(u,$);let ee=u.numberOfParams;Y=Ni.CancellationToken.is($[ee])?$[ee]:void 0}let Z=d++,oe;return Y&&(oe=Y.onCancellationRequested(()=>{let $=Ye.sender.sendCancellation(at,Z);return $===void 0?(i.log(`Received no promise from cancellation strategy when cancelling id ${Z}`),Promise.resolve()):$.catch(()=>{i.log(`Sending cancellation messages for id ${Z} failed`)})})),new Promise(($,ee)=>{let J={jsonrpc:P,id:Z,method:k,params:O},le=Je=>{$(Je),Ye.sender.cleanup(Z),oe?.dispose()},_e=Je=>{ee(Je),Ye.sender.cleanup(Z),oe?.dispose()},Ze={method:k,timerStart:Date.now(),resolve:le,reject:_e};Er(J);try{e.write(J).catch(()=>i.error("Sending request failed."))}catch(Je){Ze.reject(new j.ResponseError(j.ErrorCodes.MessageWriteError,Je.message?Je.message:"Unknown reason")),Ze=null}Ze&&X.set(Z,Ze)})},onRequest:(u,R)=>{bt();let k=null;return Ei.is(u)?(k=void 0,D=u):me.string(u)?(k=null,R!==void 0&&(k=u,w.set(u,{handler:R,type:void 0}))):R!==void 0&&(k=u.method,w.set(u.method,{type:u,handler:R})),{dispose:()=>{k!==null&&(k!==void 0?w.delete(k):D=void 0)}}},hasPendingResponse:()=>X.size>0,trace:async(u,R,k)=>{let O=!1,Y=Le.Text;k!==void 0&&(me.boolean(k)?O=k:(O=k.sendNotification||!1,Y=k.traceFormat||Le.Text)),h=u,q=Y,h===Q.Off?x=void 0:x=R,O&&!Et()&&!ot()&&await at.sendNotification(es.type,{value:Q.toString(u)})},onError:ue.event,onClose:Ve.event,onUnhandledNotification:Nt.event,onDispose:yt.event,end:()=>{e.end()},dispose:()=>{if(ot())return;re=Ie.Disposed,yt.fire(void 0);let u=new j.ResponseError(j.ErrorCodes.PendingResponseRejected,"Pending response rejected since connection got disposed");for(let R of X.values())R.reject(u);X=new Map,p=new Map,M=new Set,z=new Yo.LinkedMap,me.func(e.dispose)&&e.dispose(),me.func(t.dispose)&&t.dispose()},listen:()=>{bt(),xr(),re=Ie.Listening,t.listen(Cr)},inspect:()=>{(0,Qo.default)().console.log("inspect")}};return at.onNotification(ji.type,u=>{if(h===Q.Off||!x)return;let R=h===Q.Verbose||h===Q.Compact;x.log(u.message,R?u.verbose:void 0)}),at.onNotification(on.type,u=>{let R=H.get(u.token);R?R(u.value):pt.fire(u)}),at}F.createMessageConnection=Nc});var Ai=T(b=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0});b.SetTraceNotification=b.TraceFormat=b.Trace=b.ProgressType=b.ProgressToken=b.createMessageConnection=b.NullLogger=b.ConnectionOptions=b.ConnectionStrategy=b.WriteableStreamMessageWriter=b.AbstractMessageWriter=b.MessageWriter=b.ReadableStreamMessageReader=b.AbstractMessageReader=b.MessageReader=b.CancellationToken=b.CancellationTokenSource=b.Emitter=b.Event=b.Disposable=b.LRUCache=b.Touch=b.LinkedMap=b.ParameterStructures=b.NotificationType9=b.NotificationType8=b.NotificationType7=b.NotificationType6=b.NotificationType5=b.NotificationType4=b.NotificationType3=b.NotificationType2=b.NotificationType1=b.NotificationType0=b.NotificationType=b.ErrorCodes=b.ResponseError=b.RequestType9=b.RequestType8=b.RequestType7=b.RequestType6=b.RequestType5=b.RequestType4=b.RequestType3=b.RequestType2=b.RequestType1=b.RequestType0=b.RequestType=b.Message=b.RAL=void 0;b.CancellationStrategy=b.CancellationSenderStrategy=b.CancellationReceiverStrategy=b.ConnectionError=b.ConnectionErrors=b.LogTraceNotification=void 0;var ne=mi();Object.defineProperty(b,"Message",{enumerable:!0,get:function(){return ne.Message}});Object.defineProperty(b,"RequestType",{enumerable:!0,get:function(){return ne.RequestType}});Object.defineProperty(b,"RequestType0",{enumerable:!0,get:function(){return ne.RequestType0}});Object.defineProperty(b,"RequestType1",{enumerable:!0,get:function(){return ne.RequestType1}});Object.defineProperty(b,"RequestType2",{enumerable:!0,get:function(){return ne.RequestType2}});Object.defineProperty(b,"RequestType3",{enumerable:!0,get:function(){return ne.RequestType3}});Object.defineProperty(b,"RequestType4",{enumerable:!0,get:function(){return ne.RequestType4}});Object.defineProperty(b,"RequestType5",{enumerable:!0,get:function(){return ne.RequestType5}});Object.defineProperty(b,"RequestType6",{enumerable:!0,get:function(){return ne.RequestType6}});Object.defineProperty(b,"RequestType7",{enumerable:!0,get:function(){return ne.RequestType7}});Object.defineProperty(b,"RequestType8",{enumerable:!0,get:function(){return ne.RequestType8}});Object.defineProperty(b,"RequestType9",{enumerable:!0,get:function(){return ne.RequestType9}});Object.defineProperty(b,"ResponseError",{enumerable:!0,get:function(){return ne.ResponseError}});Object.defineProperty(b,"ErrorCodes",{enumerable:!0,get:function(){return ne.ErrorCodes}});Object.defineProperty(b,"NotificationType",{enumerable:!0,get:function(){return ne.NotificationType}});Object.defineProperty(b,"NotificationType0",{enumerable:!0,get:function(){return ne.NotificationType0}});Object.defineProperty(b,"NotificationType1",{enumerable:!0,get:function(){return ne.NotificationType1}});Object.defineProperty(b,"NotificationType2",{enumerable:!0,get:function(){return ne.NotificationType2}});Object.defineProperty(b,"NotificationType3",{enumerable:!0,get:function(){return ne.NotificationType3}});Object.defineProperty(b,"NotificationType4",{enumerable:!0,get:function(){return ne.NotificationType4}});Object.defineProperty(b,"NotificationType5",{enumerable:!0,get:function(){return ne.NotificationType5}});Object.defineProperty(b,"NotificationType6",{enumerable:!0,get:function(){return ne.NotificationType6}});Object.defineProperty(b,"NotificationType7",{enumerable:!0,get:function(){return ne.NotificationType7}});Object.defineProperty(b,"NotificationType8",{enumerable:!0,get:function(){return ne.NotificationType8}});Object.defineProperty(b,"NotificationType9",{enumerable:!0,get:function(){return ne.NotificationType9}});Object.defineProperty(b,"ParameterStructures",{enumerable:!0,get:function(){return ne.ParameterStructures}});var Li=yi();Object.defineProperty(b,"LinkedMap",{enumerable:!0,get:function(){return Li.LinkedMap}});Object.defineProperty(b,"LRUCache",{enumerable:!0,get:function(){return Li.LRUCache}});Object.defineProperty(b,"Touch",{enumerable:!0,get:function(){return Li.Touch}});var Oc=Hr();Object.defineProperty(b,"Disposable",{enumerable:!0,get:function(){return Oc.Disposable}});var rs=At();Object.defineProperty(b,"Event",{enumerable:!0,get:function(){return rs.Event}});Object.defineProperty(b,"Emitter",{enumerable:!0,get:function(){return rs.Emitter}});var is=Di();Object.defineProperty(b,"CancellationTokenSource",{enumerable:!0,get:function(){return is.CancellationTokenSource}});Object.defineProperty(b,"CancellationToken",{enumerable:!0,get:function(){return is.CancellationToken}});var Ii=Uo();Object.defineProperty(b,"MessageReader",{enumerable:!0,get:function(){return Ii.MessageReader}});Object.defineProperty(b,"AbstractMessageReader",{enumerable:!0,get:function(){return Ii.AbstractMessageReader}});Object.defineProperty(b,"ReadableStreamMessageReader",{enumerable:!0,get:function(){return Ii.ReadableStreamMessageReader}});var Wi=Xo();Object.defineProperty(b,"MessageWriter",{enumerable:!0,get:function(){return Wi.MessageWriter}});Object.defineProperty(b,"AbstractMessageWriter",{enumerable:!0,get:function(){return Wi.AbstractMessageWriter}});Object.defineProperty(b,"WriteableStreamMessageWriter",{enumerable:!0,get:function(){return Wi.WriteableStreamMessageWriter}});var Pe=ns();Object.defineProperty(b,"ConnectionStrategy",{enumerable:!0,get:function(){return Pe.ConnectionStrategy}});Object.defineProperty(b,"ConnectionOptions",{enumerable:!0,get:function(){return Pe.ConnectionOptions}});Object.defineProperty(b,"NullLogger",{enumerable:!0,get:function(){return Pe.NullLogger}});Object.defineProperty(b,"createMessageConnection",{enumerable:!0,get:function(){return Pe.createMessageConnection}});Object.defineProperty(b,"ProgressToken",{enumerable:!0,get:function(){return Pe.ProgressToken}});Object.defineProperty(b,"ProgressType",{enumerable:!0,get:function(){return Pe.ProgressType}});Object.defineProperty(b,"Trace",{enumerable:!0,get:function(){return Pe.Trace}});Object.defineProperty(b,"TraceFormat",{enumerable:!0,get:function(){return Pe.TraceFormat}});Object.defineProperty(b,"SetTraceNotification",{enumerable:!0,get:function(){return Pe.SetTraceNotification}});Object.defineProperty(b,"LogTraceNotification",{enumerable:!0,get:function(){return Pe.LogTraceNotification}});Object.defineProperty(b,"ConnectionErrors",{enumerable:!0,get:function(){return Pe.ConnectionErrors}});Object.defineProperty(b,"ConnectionError",{enumerable:!0,get:function(){return Pe.ConnectionError}});Object.defineProperty(b,"CancellationReceiverStrategy",{enumerable:!0,get:function(){return Pe.CancellationReceiverStrategy}});Object.defineProperty(b,"CancellationSenderStrategy",{enumerable:!0,get:function(){return Pe.CancellationSenderStrategy}});Object.defineProperty(b,"CancellationStrategy",{enumerable:!0,get:function(){return Pe.CancellationStrategy}});var Ec=tt();b.RAL=Ec.default});var kt=T(K=>{"use strict";var jc=K&&K.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),Fc=K&&K.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&jc(e,t,n)};Object.defineProperty(K,"__esModule",{value:!0});K.createMessageConnection=K.createServerSocketTransport=K.createClientSocketTransport=K.createServerPipeTransport=K.createClientPipeTransport=K.generateRandomPipeName=K.StreamMessageWriter=K.StreamMessageReader=K.SocketMessageWriter=K.SocketMessageReader=K.IPCMessageWriter=K.IPCMessageReader=void 0;var zt=Ao();zt.default.install();var Ge=Ai(),os=require("path"),Mc=require("os"),xc=require("crypto"),Hn=require("net");Fc(Ai(),K);var Hi=class extends Ge.AbstractMessageReader{constructor(e){super(),this.process=e;let n=this.process;n.on("error",r=>this.fireError(r)),n.on("close",()=>this.fireClose())}listen(e){return this.process.on("message",e),Ge.Disposable.create(()=>this.process.off("message",e))}};K.IPCMessageReader=Hi;var zi=class extends Ge.AbstractMessageWriter{constructor(e){super(),this.process=e,this.errorCount=0;let n=this.process;n.on("error",r=>this.fireError(r)),n.on("close",()=>this.fireClose)}write(e){try{return typeof this.process.send=="function"&&this.process.send(e,void 0,void 0,n=>{n?(this.errorCount++,this.handleError(n,e)):this.errorCount=0}),Promise.resolve()}catch(n){return this.handleError(n,e),Promise.reject(n)}}handleError(e,n){this.errorCount++,this.fireError(e,n,this.errorCount)}end(){}};K.IPCMessageWriter=zi;var wt=class extends Ge.ReadableStreamMessageReader{constructor(e,n="utf-8"){super((0,zt.default)().stream.asReadableStream(e),n)}};K.SocketMessageReader=wt;var Pt=class extends Ge.WriteableStreamMessageWriter{constructor(e,n){super((0,zt.default)().stream.asWritableStream(e),n),this.socket=e}dispose(){super.dispose(),this.socket.destroy()}};K.SocketMessageWriter=Pt;var Wn=class extends Ge.ReadableStreamMessageReader{constructor(e,n){super((0,zt.default)().stream.asReadableStream(e),n)}};K.StreamMessageReader=Wn;var An=class extends Ge.WriteableStreamMessageWriter{constructor(e,n){super((0,zt.default)().stream.asWritableStream(e),n)}};K.StreamMessageWriter=An;var ss=process.env.XDG_RUNTIME_DIR,Lc=new Map([["linux",107],["darwin",103]]);function Ic(){let t=(0,xc.randomBytes)(21).toString("hex");if(process.platform==="win32")return`\\\\.\\pipe\\vscode-jsonrpc-${t}-sock`;let e;ss?e=os.join(ss,`vscode-ipc-${t}.sock`):e=os.join(Mc.tmpdir(),`vscode-${t}.sock`);let n=Lc.get(process.platform);return n!==void 0&&e.length>=n&&(0,zt.default)().console.warn(`WARNING: IPC handle "${e}" is longer than ${n} characters.`),e}K.generateRandomPipeName=Ic;function Wc(t,e="utf-8"){let n,r=new Promise((i,d)=>{n=i});return new Promise((i,d)=>{let y=(0,Hn.createServer)(_=>{y.close(),n([new wt(_,e),new Pt(_,e)])});y.on("error",d),y.listen(t,()=>{y.removeListener("error",d),i({onConnected:()=>r})})})}K.createClientPipeTransport=Wc;function Ac(t,e="utf-8"){let n=(0,Hn.createConnection)(t);return[new wt(n,e),new Pt(n,e)]}K.createServerPipeTransport=Ac;function Hc(t,e="utf-8"){let n,r=new Promise((i,d)=>{n=i});return new Promise((i,d)=>{let y=(0,Hn.createServer)(_=>{y.close(),n([new wt(_,e),new Pt(_,e)])});y.on("error",d),y.listen(t,"127.0.0.1",()=>{y.removeListener("error",d),i({onConnected:()=>r})})})}K.createClientSocketTransport=Hc;function zc(t,e="utf-8"){let n=(0,Hn.createConnection)(t,"127.0.0.1");return[new wt(n,e),new Pt(n,e)]}K.createServerSocketTransport=zc;function $c(t){let e=t;return e.read!==void 0&&e.addListener!==void 0}function Bc(t){let e=t;return e.write!==void 0&&e.addListener!==void 0}function Uc(t,e,n,r){n||(n=Ge.NullLogger);let i=$c(t)?new Wn(t):t,d=Bc(e)?new An(e):e;return Ge.ConnectionStrategy.is(r)&&(r={connectionStrategy:r}),(0,Ge.createMessageConnection)(i,d,n,r)}K.createMessageConnection=Uc});var $i=T((nh,as)=>{"use strict";as.exports=kt()});var $n=T((cs,zn)=>{(function(t){if(typeof zn=="object"&&typeof zn.exports=="object"){var e=t(require,cs);e!==void 0&&(zn.exports=e)}else typeof define=="function"&&define.amd&&define(["require","exports"],t)})(function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TextDocument=e.EOL=e.WorkspaceFolder=e.InlayHint=e.InlayHintLabelPart=e.InlayHintKind=e.InlineValueContext=e.InlineValueEvaluatableExpression=e.InlineValueVariableLookup=e.InlineValueText=e.SemanticTokens=e.SemanticTokenModifiers=e.SemanticTokenTypes=e.SelectionRange=e.DocumentLink=e.FormattingOptions=e.CodeLens=e.CodeAction=e.CodeActionContext=e.CodeActionTriggerKind=e.CodeActionKind=e.DocumentSymbol=e.WorkspaceSymbol=e.SymbolInformation=e.SymbolTag=e.SymbolKind=e.DocumentHighlight=e.DocumentHighlightKind=e.SignatureInformation=e.ParameterInformation=e.Hover=e.MarkedString=e.CompletionList=e.CompletionItem=e.CompletionItemLabelDetails=e.InsertTextMode=e.InsertReplaceEdit=e.CompletionItemTag=e.InsertTextFormat=e.CompletionItemKind=e.MarkupContent=e.MarkupKind=e.TextDocumentItem=e.OptionalVersionedTextDocumentIdentifier=e.VersionedTextDocumentIdentifier=e.TextDocumentIdentifier=e.WorkspaceChange=e.WorkspaceEdit=e.DeleteFile=e.RenameFile=e.CreateFile=e.TextDocumentEdit=e.AnnotatedTextEdit=e.ChangeAnnotationIdentifier=e.ChangeAnnotation=e.TextEdit=e.Command=e.Diagnostic=e.CodeDescription=e.DiagnosticTag=e.DiagnosticSeverity=e.DiagnosticRelatedInformation=e.FoldingRange=e.FoldingRangeKind=e.ColorPresentation=e.ColorInformation=e.Color=e.LocationLink=e.Location=e.Range=e.Position=e.uinteger=e.integer=e.URI=e.DocumentUri=void 0;var n;(function(s){function l(f){return typeof f=="string"}s.is=l})(n=e.DocumentUri||(e.DocumentUri={}));var r;(function(s){function l(f){return typeof f=="string"}s.is=l})(r=e.URI||(e.URI={}));var i;(function(s){s.MIN_VALUE=-2147483648,s.MAX_VALUE=2147483647;function l(f){return typeof f=="number"&&s.MIN_VALUE<=f&&f<=s.MAX_VALUE}s.is=l})(i=e.integer||(e.integer={}));var d;(function(s){s.MIN_VALUE=0,s.MAX_VALUE=2147483647;function l(f){return typeof f=="number"&&s.MIN_VALUE<=f&&f<=s.MAX_VALUE}s.is=l})(d=e.uinteger||(e.uinteger={}));var y;(function(s){function l(c,o){return c===Number.MAX_VALUE&&(c=d.MAX_VALUE),o===Number.MAX_VALUE&&(o=d.MAX_VALUE),{line:c,character:o}}s.create=l;function f(c){var o=c;return g.objectLiteral(o)&&g.uinteger(o.line)&&g.uinteger(o.character)}s.is=f})(y=e.Position||(e.Position={}));var _;(function(s){function l(c,o,m,v){if(g.uinteger(c)&&g.uinteger(o)&&g.uinteger(m)&&g.uinteger(v))return{start:y.create(c,o),end:y.create(m,v)};if(y.is(c)&&y.is(o))return{start:c,end:o};throw new Error("Range#create called with invalid arguments[".concat(c,", ").concat(o,", ").concat(m,", ").concat(v,"]"))}s.create=l;function f(c){var o=c;return g.objectLiteral(o)&&y.is(o.start)&&y.is(o.end)}s.is=f})(_=e.Range||(e.Range={}));var P;(function(s){function l(c,o){return{uri:c,range:o}}s.create=l;function f(c){var o=c;return g.defined(o)&&_.is(o.range)&&(g.string(o.uri)||g.undefined(o.uri))}s.is=f})(P=e.Location||(e.Location={}));var D;(function(s){function l(c,o,m,v){return{targetUri:c,targetRange:o,targetSelectionRange:m,originSelectionRange:v}}s.create=l;function f(c){var o=c;return g.defined(o)&&_.is(o.targetRange)&&g.string(o.targetUri)&&_.is(o.targetSelectionRange)&&(_.is(o.originSelectionRange)||g.undefined(o.originSelectionRange))}s.is=f})(D=e.LocationLink||(e.LocationLink={}));var w;(function(s){function l(c,o,m,v){return{red:c,green:o,blue:m,alpha:v}}s.create=l;function f(c){var o=c;return g.objectLiteral(o)&&g.numberRange(o.red,0,1)&&g.numberRange(o.green,0,1)&&g.numberRange(o.blue,0,1)&&g.numberRange(o.alpha,0,1)}s.is=f})(w=e.Color||(e.Color={}));var N;(function(s){function l(c,o){return{range:c,color:o}}s.create=l;function f(c){var o=c;return g.objectLiteral(o)&&_.is(o.range)&&w.is(o.color)}s.is=f})(N=e.ColorInformation||(e.ColorInformation={}));var S;(function(s){function l(c,o,m){return{label:c,textEdit:o,additionalTextEdits:m}}s.create=l;function f(c){var o=c;return g.objectLiteral(o)&&g.string(o.label)&&(g.undefined(o.textEdit)||x.is(o))&&(g.undefined(o.additionalTextEdits)||g.typedArray(o.additionalTextEdits,x.is))}s.is=f})(S=e.ColorPresentation||(e.ColorPresentation={}));var H;(function(s){s.Comment="comment",s.Imports="imports",s.Region="region"})(H=e.FoldingRangeKind||(e.FoldingRangeKind={}));var U;(function(s){function l(c,o,m,v,I,ce){var te={startLine:c,endLine:o};return g.defined(m)&&(te.startCharacter=m),g.defined(v)&&(te.endCharacter=v),g.defined(I)&&(te.kind=I),g.defined(ce)&&(te.collapsedText=ce),te}s.create=l;function f(c){var o=c;return g.objectLiteral(o)&&g.uinteger(o.startLine)&&g.uinteger(o.startLine)&&(g.undefined(o.startCharacter)||g.uinteger(o.startCharacter))&&(g.undefined(o.endCharacter)||g.uinteger(o.endCharacter))&&(g.undefined(o.kind)||g.string(o.kind))}s.is=f})(U=e.FoldingRange||(e.FoldingRange={}));var z;(function(s){function l(c,o){return{location:c,message:o}}s.create=l;function f(c){var o=c;return g.defined(o)&&P.is(o.location)&&g.string(o.message)}s.is=f})(z=e.DiagnosticRelatedInformation||(e.DiagnosticRelatedInformation={}));var X;(function(s){s.Error=1,s.Warning=2,s.Information=3,s.Hint=4})(X=e.DiagnosticSeverity||(e.DiagnosticSeverity={}));var M;(function(s){s.Unnecessary=1,s.Deprecated=2})(M=e.DiagnosticTag||(e.DiagnosticTag={}));var p;(function(s){function l(f){var c=f;return g.objectLiteral(c)&&g.string(c.href)}s.is=l})(p=e.CodeDescription||(e.CodeDescription={}));var h;(function(s){function l(c,o,m,v,I,ce){var te={range:c,message:o};return g.defined(m)&&(te.severity=m),g.defined(v)&&(te.code=v),g.defined(I)&&(te.source=I),g.defined(ce)&&(te.relatedInformation=ce),te}s.create=l;function f(c){var o,m=c;return g.defined(m)&&_.is(m.range)&&g.string(m.message)&&(g.number(m.severity)||g.undefined(m.severity))&&(g.integer(m.code)||g.string(m.code)||g.undefined(m.code))&&(g.undefined(m.codeDescription)||g.string((o=m.codeDescription)===null||o===void 0?void 0:o.href))&&(g.string(m.source)||g.undefined(m.source))&&(g.undefined(m.relatedInformation)||g.typedArray(m.relatedInformation,z.is))}s.is=f})(h=e.Diagnostic||(e.Diagnostic={}));var q;(function(s){function l(c,o){for(var m=[],v=2;v<arguments.length;v++)m[v-2]=arguments[v];var I={title:c,command:o};return g.defined(m)&&m.length>0&&(I.arguments=m),I}s.create=l;function f(c){var o=c;return g.defined(o)&&g.string(o.title)&&g.string(o.command)}s.is=f})(q=e.Command||(e.Command={}));var x;(function(s){function l(m,v){return{range:m,newText:v}}s.replace=l;function f(m,v){return{range:{start:m,end:m},newText:v}}s.insert=f;function c(m){return{range:m,newText:""}}s.del=c;function o(m){var v=m;return g.objectLiteral(v)&&g.string(v.newText)&&_.is(v.range)}s.is=o})(x=e.TextEdit||(e.TextEdit={}));var re;(function(s){function l(c,o,m){var v={label:c};return o!==void 0&&(v.needsConfirmation=o),m!==void 0&&(v.description=m),v}s.create=l;function f(c){var o=c;return g.objectLiteral(o)&&g.string(o.label)&&(g.boolean(o.needsConfirmation)||o.needsConfirmation===void 0)&&(g.string(o.description)||o.description===void 0)}s.is=f})(re=e.ChangeAnnotation||(e.ChangeAnnotation={}));var ue;(function(s){function l(f){var c=f;return g.string(c)}s.is=l})(ue=e.ChangeAnnotationIdentifier||(e.ChangeAnnotationIdentifier={}));var Ve;(function(s){function l(m,v,I){return{range:m,newText:v,annotationId:I}}s.replace=l;function f(m,v,I){return{range:{start:m,end:m},newText:v,annotationId:I}}s.insert=f;function c(m,v){return{range:m,newText:"",annotationId:v}}s.del=c;function o(m){var v=m;return x.is(v)&&(re.is(v.annotationId)||ue.is(v.annotationId))}s.is=o})(Ve=e.AnnotatedTextEdit||(e.AnnotatedTextEdit={}));var Nt;(function(s){function l(c,o){return{textDocument:c,edits:o}}s.create=l;function f(c){var o=c;return g.defined(o)&&Et.is(o.textDocument)&&Array.isArray(o.edits)}s.is=f})(Nt=e.TextDocumentEdit||(e.TextDocumentEdit={}));var pt;(function(s){function l(c,o,m){var v={kind:"create",uri:c};return o!==void 0&&(o.overwrite!==void 0||o.ignoreIfExists!==void 0)&&(v.options=o),m!==void 0&&(v.annotationId=m),v}s.create=l;function f(c){var o=c;return o&&o.kind==="create"&&g.string(o.uri)&&(o.options===void 0||(o.options.overwrite===void 0||g.boolean(o.options.overwrite))&&(o.options.ignoreIfExists===void 0||g.boolean(o.options.ignoreIfExists)))&&(o.annotationId===void 0||ue.is(o.annotationId))}s.is=f})(pt=e.CreateFile||(e.CreateFile={}));var yt;(function(s){function l(c,o,m,v){var I={kind:"rename",oldUri:c,newUri:o};return m!==void 0&&(m.overwrite!==void 0||m.ignoreIfExists!==void 0)&&(I.options=m),v!==void 0&&(I.annotationId=v),I}s.create=l;function f(c){var o=c;return o&&o.kind==="rename"&&g.string(o.oldUri)&&g.string(o.newUri)&&(o.options===void 0||(o.options.overwrite===void 0||g.boolean(o.options.overwrite))&&(o.options.ignoreIfExists===void 0||g.boolean(o.options.ignoreIfExists)))&&(o.annotationId===void 0||ue.is(o.annotationId))}s.is=f})(yt=e.RenameFile||(e.RenameFile={}));var Ye;(function(s){function l(c,o,m){var v={kind:"delete",uri:c};return o!==void 0&&(o.recursive!==void 0||o.ignoreIfNotExists!==void 0)&&(v.options=o),m!==void 0&&(v.annotationId=m),v}s.create=l;function f(c){var o=c;return o&&o.kind==="delete"&&g.string(o.uri)&&(o.options===void 0||(o.options.recursive===void 0||g.boolean(o.options.recursive))&&(o.options.ignoreIfNotExists===void 0||g.boolean(o.options.ignoreIfNotExists)))&&(o.annotationId===void 0||ue.is(o.annotationId))}s.is=f})(Ye=e.DeleteFile||(e.DeleteFile={}));var Xt;(function(s){function l(f){var c=f;return c&&(c.changes!==void 0||c.documentChanges!==void 0)&&(c.documentChanges===void 0||c.documentChanges.every(function(o){return g.string(o.kind)?pt.is(o)||yt.is(o)||Ye.is(o):Nt.is(o)}))}s.is=l})(Xt=e.WorkspaceEdit||(e.WorkspaceEdit={}));var Ot=function(){function s(l,f){this.edits=l,this.changeAnnotations=f}return s.prototype.insert=function(l,f,c){var o,m;if(c===void 0?o=x.insert(l,f):ue.is(c)?(m=c,o=Ve.insert(l,f,c)):(this.assertChangeAnnotations(this.changeAnnotations),m=this.changeAnnotations.manage(c),o=Ve.insert(l,f,m)),this.edits.push(o),m!==void 0)return m},s.prototype.replace=function(l,f,c){var o,m;if(c===void 0?o=x.replace(l,f):ue.is(c)?(m=c,o=Ve.replace(l,f,c)):(this.assertChangeAnnotations(this.changeAnnotations),m=this.changeAnnotations.manage(c),o=Ve.replace(l,f,m)),this.edits.push(o),m!==void 0)return m},s.prototype.delete=function(l,f){var c,o;if(f===void 0?c=x.del(l):ue.is(f)?(o=f,c=Ve.del(l,f)):(this.assertChangeAnnotations(this.changeAnnotations),o=this.changeAnnotations.manage(f),c=Ve.del(l,o)),this.edits.push(c),o!==void 0)return o},s.prototype.add=function(l){this.edits.push(l)},s.prototype.all=function(){return this.edits},s.prototype.clear=function(){this.edits.splice(0,this.edits.length)},s.prototype.assertChangeAnnotations=function(l){if(l===void 0)throw new Error("Text edit change is not configured to manage change annotations.")},s}(),wn=function(){function s(l){this._annotations=l===void 0?Object.create(null):l,this._counter=0,this._size=0}return s.prototype.all=function(){return this._annotations},Object.defineProperty(s.prototype,"size",{get:function(){return this._size},enumerable:!1,configurable:!0}),s.prototype.manage=function(l,f){var c;if(ue.is(l)?c=l:(c=this.nextId(),f=l),this._annotations[c]!==void 0)throw new Error("Id ".concat(c," is already in use."));if(f===void 0)throw new Error("No annotation provided for id ".concat(c));return this._annotations[c]=f,this._size++,c},s.prototype.nextId=function(){return this._counter++,this._counter.toString()},s}(),qr=function(){function s(l){var f=this;this._textEditChanges=Object.create(null),l!==void 0?(this._workspaceEdit=l,l.documentChanges?(this._changeAnnotations=new wn(l.changeAnnotations),l.changeAnnotations=this._changeAnnotations.all(),l.documentChanges.forEach(function(c){if(Nt.is(c)){var o=new Ot(c.edits,f._changeAnnotations);f._textEditChanges[c.textDocument.uri]=o}})):l.changes&&Object.keys(l.changes).forEach(function(c){var o=new Ot(l.changes[c]);f._textEditChanges[c]=o})):this._workspaceEdit={}}return Object.defineProperty(s.prototype,"edit",{get:function(){return this.initDocumentChanges(),this._changeAnnotations!==void 0&&(this._changeAnnotations.size===0?this._workspaceEdit.changeAnnotations=void 0:this._workspaceEdit.changeAnnotations=this._changeAnnotations.all()),this._workspaceEdit},enumerable:!1,configurable:!0}),s.prototype.getTextEditChange=function(l){if(Et.is(l)){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var f={uri:l.uri,version:l.version},c=this._textEditChanges[f.uri];if(!c){var o=[],m={textDocument:f,edits:o};this._workspaceEdit.documentChanges.push(m),c=new Ot(o,this._changeAnnotations),this._textEditChanges[f.uri]=c}return c}else{if(this.initChanges(),this._workspaceEdit.changes===void 0)throw new Error("Workspace edit is not configured for normal text edit changes.");var c=this._textEditChanges[l];if(!c){var o=[];this._workspaceEdit.changes[l]=o,c=new Ot(o),this._textEditChanges[l]=c}return c}},s.prototype.initDocumentChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._changeAnnotations=new wn,this._workspaceEdit.documentChanges=[],this._workspaceEdit.changeAnnotations=this._changeAnnotations.all())},s.prototype.initChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._workspaceEdit.changes=Object.create(null))},s.prototype.createFile=function(l,f,c){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var o;re.is(f)||ue.is(f)?o=f:c=f;var m,v;if(o===void 0?m=pt.create(l,c):(v=ue.is(o)?o:this._changeAnnotations.manage(o),m=pt.create(l,c,v)),this._workspaceEdit.documentChanges.push(m),v!==void 0)return v},s.prototype.renameFile=function(l,f,c,o){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var m;re.is(c)||ue.is(c)?m=c:o=c;var v,I;if(m===void 0?v=yt.create(l,f,o):(I=ue.is(m)?m:this._changeAnnotations.manage(m),v=yt.create(l,f,o,I)),this._workspaceEdit.documentChanges.push(v),I!==void 0)return I},s.prototype.deleteFile=function(l,f,c){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var o;re.is(f)||ue.is(f)?o=f:c=f;var m,v;if(o===void 0?m=Ye.create(l,c):(v=ue.is(o)?o:this._changeAnnotations.manage(o),m=Ye.create(l,c,v)),this._workspaceEdit.documentChanges.push(m),v!==void 0)return v},s}();e.WorkspaceChange=qr;var wr;(function(s){function l(c){return{uri:c}}s.create=l;function f(c){var o=c;return g.defined(o)&&g.string(o.uri)}s.is=f})(wr=e.TextDocumentIdentifier||(e.TextDocumentIdentifier={}));var Pn;(function(s){function l(c,o){return{uri:c,version:o}}s.create=l;function f(c){var o=c;return g.defined(o)&&g.string(o.uri)&&g.integer(o.version)}s.is=f})(Pn=e.VersionedTextDocumentIdentifier||(e.VersionedTextDocumentIdentifier={}));var Et;(function(s){function l(c,o){return{uri:c,version:o}}s.create=l;function f(c){var o=c;return g.defined(o)&&g.string(o.uri)&&(o.version===null||g.integer(o.version))}s.is=f})(Et=e.OptionalVersionedTextDocumentIdentifier||(e.OptionalVersionedTextDocumentIdentifier={}));var ot;(function(s){function l(c,o,m,v){return{uri:c,languageId:o,version:m,text:v}}s.create=l;function f(c){var o=c;return g.defined(o)&&g.string(o.uri)&&g.string(o.languageId)&&g.integer(o.version)&&g.string(o.text)}s.is=f})(ot=e.TextDocumentItem||(e.TextDocumentItem={}));var Qt;(function(s){s.PlainText="plaintext",s.Markdown="markdown";function l(f){var c=f;return c===s.PlainText||c===s.Markdown}s.is=l})(Qt=e.MarkupKind||(e.MarkupKind={}));var jt;(function(s){function l(f){var c=f;return g.objectLiteral(f)&&Qt.is(c.kind)&&g.string(c.value)}s.is=l})(jt=e.MarkupContent||(e.MarkupContent={}));var Pr;(function(s){s.Text=1,s.Method=2,s.Function=3,s.Constructor=4,s.Field=5,s.Variable=6,s.Class=7,s.Interface=8,s.Module=9,s.Property=10,s.Unit=11,s.Value=12,s.Enum=13,s.Keyword=14,s.Snippet=15,s.Color=16,s.File=17,s.Reference=18,s.Folder=19,s.EnumMember=20,s.Constant=21,s.Struct=22,s.Event=23,s.Operator=24,s.TypeParameter=25})(Pr=e.CompletionItemKind||(e.CompletionItemKind={}));var kn;(function(s){s.PlainText=1,s.Snippet=2})(kn=e.InsertTextFormat||(e.InsertTextFormat={}));var kr;(function(s){s.Deprecated=1})(kr=e.CompletionItemTag||(e.CompletionItemTag={}));var Cr;(function(s){function l(c,o,m){return{newText:c,insert:o,replace:m}}s.create=l;function f(c){var o=c;return o&&g.string(o.newText)&&_.is(o.insert)&&_.is(o.replace)}s.is=f})(Cr=e.InsertReplaceEdit||(e.InsertReplaceEdit={}));var Tr;(function(s){s.asIs=1,s.adjustIndentation=2})(Tr=e.InsertTextMode||(e.InsertTextMode={}));var Sr;(function(s){function l(f){var c=f;return c&&(g.string(c.detail)||c.detail===void 0)&&(g.string(c.description)||c.description===void 0)}s.is=l})(Sr=e.CompletionItemLabelDetails||(e.CompletionItemLabelDetails={}));var Nr;(function(s){function l(f){return{label:f}}s.create=l})(Nr=e.CompletionItem||(e.CompletionItem={}));var Or;(function(s){function l(f,c){return{items:f||[],isIncomplete:!!c}}s.create=l})(Or=e.CompletionList||(e.CompletionList={}));var Ne;(function(s){function l(c){return c.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}s.fromPlainText=l;function f(c){var o=c;return g.string(o)||g.objectLiteral(o)&&g.string(o.language)&&g.string(o.value)}s.is=f})(Ne=e.MarkedString||(e.MarkedString={}));var Er;(function(s){function l(f){var c=f;return!!c&&g.objectLiteral(c)&&(jt.is(c.contents)||Ne.is(c.contents)||g.typedArray(c.contents,Ne.is))&&(f.range===void 0||_.is(f.range))}s.is=l})(Er=e.Hover||(e.Hover={}));var jr;(function(s){function l(f,c){return c?{label:f,documentation:c}:{label:f}}s.create=l})(jr=e.ParameterInformation||(e.ParameterInformation={}));var Ft;(function(s){function l(f,c){for(var o=[],m=2;m<arguments.length;m++)o[m-2]=arguments[m];var v={label:f};return g.defined(c)&&(v.documentation=c),g.defined(o)?v.parameters=o:v.parameters=[],v}s.create=l})(Ft=e.SignatureInformation||(e.SignatureInformation={}));var Fr;(function(s){s.Text=1,s.Read=2,s.Write=3})(Fr=e.DocumentHighlightKind||(e.DocumentHighlightKind={}));var Yt;(function(s){function l(f,c){var o={range:f};return g.number(c)&&(o.kind=c),o}s.create=l})(Yt=e.DocumentHighlight||(e.DocumentHighlight={}));var Mr;(function(s){s.File=1,s.Module=2,s.Namespace=3,s.Package=4,s.Class=5,s.Method=6,s.Property=7,s.Field=8,s.Constructor=9,s.Enum=10,s.Interface=11,s.Function=12,s.Variable=13,s.Constant=14,s.String=15,s.Number=16,s.Boolean=17,s.Array=18,s.Object=19,s.Key=20,s.Null=21,s.EnumMember=22,s.Struct=23,s.Event=24,s.Operator=25,s.TypeParameter=26})(Mr=e.SymbolKind||(e.SymbolKind={}));var st;(function(s){s.Deprecated=1})(st=e.SymbolTag||(e.SymbolTag={}));var bt;(function(s){function l(f,c,o,m,v){var I={name:f,kind:c,location:{uri:m,range:o}};return v&&(I.containerName=v),I}s.create=l})(bt=e.SymbolInformation||(e.SymbolInformation={}));var xr;(function(s){function l(f,c,o,m){return m!==void 0?{name:f,kind:c,location:{uri:o,range:m}}:{name:f,kind:c,location:{uri:o}}}s.create=l})(xr=e.WorkspaceSymbol||(e.WorkspaceSymbol={}));var Lr;(function(s){function l(c,o,m,v,I,ce){var te={name:c,detail:o,kind:m,range:v,selectionRange:I};return ce!==void 0&&(te.children=ce),te}s.create=l;function f(c){var o=c;return o&&g.string(o.name)&&g.number(o.kind)&&_.is(o.range)&&_.is(o.selectionRange)&&(o.detail===void 0||g.string(o.detail))&&(o.deprecated===void 0||g.boolean(o.deprecated))&&(o.children===void 0||Array.isArray(o.children))&&(o.tags===void 0||Array.isArray(o.tags))}s.is=f})(Lr=e.DocumentSymbol||(e.DocumentSymbol={}));var vt;(function(s){s.Empty="",s.QuickFix="quickfix",s.Refactor="refactor",s.RefactorExtract="refactor.extract",s.RefactorInline="refactor.inline",s.RefactorRewrite="refactor.rewrite",s.Source="source",s.SourceOrganizeImports="source.organizeImports",s.SourceFixAll="source.fixAll"})(vt=e.CodeActionKind||(e.CodeActionKind={}));var Mt;(function(s){s.Invoked=1,s.Automatic=2})(Mt=e.CodeActionTriggerKind||(e.CodeActionTriggerKind={}));var Cn;(function(s){function l(c,o,m){var v={diagnostics:c};return o!=null&&(v.only=o),m!=null&&(v.triggerKind=m),v}s.create=l;function f(c){var o=c;return g.defined(o)&&g.typedArray(o.diagnostics,h.is)&&(o.only===void 0||g.typedArray(o.only,g.string))&&(o.triggerKind===void 0||o.triggerKind===Mt.Invoked||o.triggerKind===Mt.Automatic)}s.is=f})(Cn=e.CodeActionContext||(e.CodeActionContext={}));var Zt;(function(s){function l(c,o,m){var v={title:c},I=!0;return typeof o=="string"?(I=!1,v.kind=o):q.is(o)?v.command=o:v.edit=o,I&&m!==void 0&&(v.kind=m),v}s.create=l;function f(c){var o=c;return o&&g.string(o.title)&&(o.diagnostics===void 0||g.typedArray(o.diagnostics,h.is))&&(o.kind===void 0||g.string(o.kind))&&(o.edit!==void 0||o.command!==void 0)&&(o.command===void 0||q.is(o.command))&&(o.isPreferred===void 0||g.boolean(o.isPreferred))&&(o.edit===void 0||Xt.is(o.edit))}s.is=f})(Zt=e.CodeAction||(e.CodeAction={}));var Tn;(function(s){function l(c,o){var m={range:c};return g.defined(o)&&(m.data=o),m}s.create=l;function f(c){var o=c;return g.defined(o)&&_.is(o.range)&&(g.undefined(o.command)||q.is(o.command))}s.is=f})(Tn=e.CodeLens||(e.CodeLens={}));var at;(function(s){function l(c,o){return{tabSize:c,insertSpaces:o}}s.create=l;function f(c){var o=c;return g.defined(o)&&g.uinteger(o.tabSize)&&g.boolean(o.insertSpaces)}s.is=f})(at=e.FormattingOptions||(e.FormattingOptions={}));var u;(function(s){function l(c,o,m){return{range:c,target:o,data:m}}s.create=l;function f(c){var o=c;return g.defined(o)&&_.is(o.range)&&(g.undefined(o.target)||g.string(o.target))}s.is=f})(u=e.DocumentLink||(e.DocumentLink={}));var R;(function(s){function l(c,o){return{range:c,parent:o}}s.create=l;function f(c){var o=c;return g.objectLiteral(o)&&_.is(o.range)&&(o.parent===void 0||s.is(o.parent))}s.is=f})(R=e.SelectionRange||(e.SelectionRange={}));var k;(function(s){s.namespace="namespace",s.type="type",s.class="class",s.enum="enum",s.interface="interface",s.struct="struct",s.typeParameter="typeParameter",s.parameter="parameter",s.variable="variable",s.property="property",s.enumMember="enumMember",s.event="event",s.function="function",s.method="method",s.macro="macro",s.keyword="keyword",s.modifier="modifier",s.comment="comment",s.string="string",s.number="number",s.regexp="regexp",s.operator="operator",s.decorator="decorator"})(k=e.SemanticTokenTypes||(e.SemanticTokenTypes={}));var O;(function(s){s.declaration="declaration",s.definition="definition",s.readonly="readonly",s.static="static",s.deprecated="deprecated",s.abstract="abstract",s.async="async",s.modification="modification",s.documentation="documentation",s.defaultLibrary="defaultLibrary"})(O=e.SemanticTokenModifiers||(e.SemanticTokenModifiers={}));var Y;(function(s){function l(f){var c=f;return g.objectLiteral(c)&&(c.resultId===void 0||typeof c.resultId=="string")&&Array.isArray(c.data)&&(c.data.length===0||typeof c.data[0]=="number")}s.is=l})(Y=e.SemanticTokens||(e.SemanticTokens={}));var Z;(function(s){function l(c,o){return{range:c,text:o}}s.create=l;function f(c){var o=c;return o!=null&&_.is(o.range)&&g.string(o.text)}s.is=f})(Z=e.InlineValueText||(e.InlineValueText={}));var oe;(function(s){function l(c,o,m){return{range:c,variableName:o,caseSensitiveLookup:m}}s.create=l;function f(c){var o=c;return o!=null&&_.is(o.range)&&g.boolean(o.caseSensitiveLookup)&&(g.string(o.variableName)||o.variableName===void 0)}s.is=f})(oe=e.InlineValueVariableLookup||(e.InlineValueVariableLookup={}));var de;(function(s){function l(c,o){return{range:c,expression:o}}s.create=l;function f(c){var o=c;return o!=null&&_.is(o.range)&&(g.string(o.expression)||o.expression===void 0)}s.is=f})(de=e.InlineValueEvaluatableExpression||(e.InlineValueEvaluatableExpression={}));var $;(function(s){function l(c,o){return{frameId:c,stoppedLocation:o}}s.create=l;function f(c){var o=c;return g.defined(o)&&_.is(c.stoppedLocation)}s.is=f})($=e.InlineValueContext||(e.InlineValueContext={}));var ee;(function(s){s.Type=1,s.Parameter=2;function l(f){return f===1||f===2}s.is=l})(ee=e.InlayHintKind||(e.InlayHintKind={}));var J;(function(s){function l(c){return{value:c}}s.create=l;function f(c){var o=c;return g.objectLiteral(o)&&(o.tooltip===void 0||g.string(o.tooltip)||jt.is(o.tooltip))&&(o.location===void 0||P.is(o.location))&&(o.command===void 0||q.is(o.command))}s.is=f})(J=e.InlayHintLabelPart||(e.InlayHintLabelPart={}));var le;(function(s){function l(c,o,m){var v={position:c,label:o};return m!==void 0&&(v.kind=m),v}s.create=l;function f(c){var o=c;return g.objectLiteral(o)&&y.is(o.position)&&(g.string(o.label)||g.typedArray(o.label,J.is))&&(o.kind===void 0||ee.is(o.kind))&&o.textEdits===void 0||g.typedArray(o.textEdits,x.is)&&(o.tooltip===void 0||g.string(o.tooltip)||jt.is(o.tooltip))&&(o.paddingLeft===void 0||g.boolean(o.paddingLeft))&&(o.paddingRight===void 0||g.boolean(o.paddingRight))}s.is=f})(le=e.InlayHint||(e.InlayHint={}));var _e;(function(s){function l(f){var c=f;return g.objectLiteral(c)&&r.is(c.uri)&&g.string(c.name)}s.is=l})(_e=e.WorkspaceFolder||(e.WorkspaceFolder={})),e.EOL=[`
`,`\r
`,"\r"];var Ze;(function(s){function l(m,v,I,ce){return new Je(m,v,I,ce)}s.create=l;function f(m){var v=m;return!!(g.defined(v)&&g.string(v.uri)&&(g.undefined(v.languageId)||g.string(v.languageId))&&g.uinteger(v.lineCount)&&g.func(v.getText)&&g.func(v.positionAt)&&g.func(v.offsetAt))}s.is=f;function c(m,v){for(var I=m.getText(),ce=o(v,function(xt,Sn){var Eo=xt.range.start.line-Sn.range.start.line;return Eo===0?xt.range.start.character-Sn.range.start.character:Eo}),te=I.length,Me=ce.length-1;Me>=0;Me--){var xe=ce[Me],et=m.offsetAt(xe.range.start),B=m.offsetAt(xe.range.end);if(B<=te)I=I.substring(0,et)+xe.newText+I.substring(B,I.length);else throw new Error("Overlapping edit");te=et}return I}s.applyEdits=c;function o(m,v){if(m.length<=1)return m;var I=m.length/2|0,ce=m.slice(0,I),te=m.slice(I);o(ce,v),o(te,v);for(var Me=0,xe=0,et=0;Me<ce.length&&xe<te.length;){var B=v(ce[Me],te[xe]);B<=0?m[et++]=ce[Me++]:m[et++]=te[xe++]}for(;Me<ce.length;)m[et++]=ce[Me++];for(;xe<te.length;)m[et++]=te[xe++];return m}})(Ze=e.TextDocument||(e.TextDocument={}));var Je=function(){function s(l,f,c,o){this._uri=l,this._languageId=f,this._version=c,this._content=o,this._lineOffsets=void 0}return Object.defineProperty(s.prototype,"uri",{get:function(){return this._uri},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"languageId",{get:function(){return this._languageId},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"version",{get:function(){return this._version},enumerable:!1,configurable:!0}),s.prototype.getText=function(l){if(l){var f=this.offsetAt(l.start),c=this.offsetAt(l.end);return this._content.substring(f,c)}return this._content},s.prototype.update=function(l,f){this._content=l.text,this._version=f,this._lineOffsets=void 0},s.prototype.getLineOffsets=function(){if(this._lineOffsets===void 0){for(var l=[],f=this._content,c=!0,o=0;o<f.length;o++){c&&(l.push(o),c=!1);var m=f.charAt(o);c=m==="\r"||m===`
`,m==="\r"&&o+1<f.length&&f.charAt(o+1)===`
`&&o++}c&&f.length>0&&l.push(f.length),this._lineOffsets=l}return this._lineOffsets},s.prototype.positionAt=function(l){l=Math.max(Math.min(l,this._content.length),0);var f=this.getLineOffsets(),c=0,o=f.length;if(o===0)return y.create(0,l);for(;c<o;){var m=Math.floor((c+o)/2);f[m]>l?o=m:c=m+1}var v=c-1;return y.create(v,l-f[v])},s.prototype.offsetAt=function(l){var f=this.getLineOffsets();if(l.line>=f.length)return this._content.length;if(l.line<0)return 0;var c=f[l.line],o=l.line+1<f.length?f[l.line+1]:this._content.length;return Math.max(Math.min(c+l.character,o),c)},Object.defineProperty(s.prototype,"lineCount",{get:function(){return this.getLineOffsets().length},enumerable:!1,configurable:!0}),s}(),g;(function(s){var l=Object.prototype.toString;function f(B){return typeof B<"u"}s.defined=f;function c(B){return typeof B>"u"}s.undefined=c;function o(B){return B===!0||B===!1}s.boolean=o;function m(B){return l.call(B)==="[object String]"}s.string=m;function v(B){return l.call(B)==="[object Number]"}s.number=v;function I(B,xt,Sn){return l.call(B)==="[object Number]"&&xt<=B&&B<=Sn}s.numberRange=I;function ce(B){return l.call(B)==="[object Number]"&&-2147483648<=B&&B<=2147483647}s.integer=ce;function te(B){return l.call(B)==="[object Number]"&&0<=B&&B<=2147483647}s.uinteger=te;function Me(B){return l.call(B)==="[object Function]"}s.func=Me;function xe(B){return B!==null&&typeof B=="object"}s.objectLiteral=xe;function et(B,xt){return Array.isArray(B)&&B.every(xt)}s.typedArray=et})(g||(g={}))})});var se=T(Oe=>{"use strict";Object.defineProperty(Oe,"__esModule",{value:!0});Oe.ProtocolNotificationType=Oe.ProtocolNotificationType0=Oe.ProtocolRequestType=Oe.ProtocolRequestType0=Oe.RegistrationType=void 0;var $t=kt(),Bi=class{constructor(e){this.method=e}};Oe.RegistrationType=Bi;var Ui=class extends $t.RequestType0{constructor(e){super(e)}};Oe.ProtocolRequestType0=Ui;var Vi=class extends $t.RequestType{constructor(e){super(e,$t.ParameterStructures.byName)}};Oe.ProtocolRequestType=Vi;var Ji=class extends $t.NotificationType0{constructor(e){super(e)}};Oe.ProtocolNotificationType0=Ji;var Gi=class extends $t.NotificationType{constructor(e){super(e,$t.ParameterStructures.byName)}};Oe.ProtocolNotificationType=Gi});var Bn=T(he=>{"use strict";Object.defineProperty(he,"__esModule",{value:!0});he.objectLiteral=he.typedArray=he.stringArray=he.array=he.func=he.error=he.number=he.string=he.boolean=void 0;function Vc(t){return t===!0||t===!1}he.boolean=Vc;function us(t){return typeof t=="string"||t instanceof String}he.string=us;function Jc(t){return typeof t=="number"||t instanceof Number}he.number=Jc;function Gc(t){return t instanceof Error}he.error=Gc;function Kc(t){return typeof t=="function"}he.func=Kc;function ls(t){return Array.isArray(t)}he.array=ls;function Xc(t){return ls(t)&&t.every(e=>us(e))}he.stringArray=Xc;function Qc(t,e){return Array.isArray(t)&&t.every(e)}he.typedArray=Qc;function Yc(t){return t!==null&&typeof t=="object"}he.objectLiteral=Yc});var ds=T(an=>{"use strict";Object.defineProperty(an,"__esModule",{value:!0});an.ImplementationRequest=void 0;var Zc=se(),eu;(function(t){t.method="textDocument/implementation",t.type=new Zc.ProtocolRequestType(t.method)})(eu=an.ImplementationRequest||(an.ImplementationRequest={}))});var fs=T(cn=>{"use strict";Object.defineProperty(cn,"__esModule",{value:!0});cn.TypeDefinitionRequest=void 0;var tu=se(),nu;(function(t){t.method="textDocument/typeDefinition",t.type=new tu.ProtocolRequestType(t.method)})(nu=cn.TypeDefinitionRequest||(cn.TypeDefinitionRequest={}))});var gs=T(ut=>{"use strict";Object.defineProperty(ut,"__esModule",{value:!0});ut.DidChangeWorkspaceFoldersNotification=ut.WorkspaceFoldersRequest=void 0;var hs=se(),ru;(function(t){t.type=new hs.ProtocolRequestType0("workspace/workspaceFolders")})(ru=ut.WorkspaceFoldersRequest||(ut.WorkspaceFoldersRequest={}));var iu;(function(t){t.type=new hs.ProtocolNotificationType("workspace/didChangeWorkspaceFolders")})(iu=ut.DidChangeWorkspaceFoldersNotification||(ut.DidChangeWorkspaceFoldersNotification={}))});var ms=T(un=>{"use strict";Object.defineProperty(un,"__esModule",{value:!0});un.ConfigurationRequest=void 0;var ou=se(),su;(function(t){t.type=new ou.ProtocolRequestType("workspace/configuration")})(su=un.ConfigurationRequest||(un.ConfigurationRequest={}))});var ys=T(lt=>{"use strict";Object.defineProperty(lt,"__esModule",{value:!0});lt.ColorPresentationRequest=lt.DocumentColorRequest=void 0;var ps=se(),au;(function(t){t.method="textDocument/documentColor",t.type=new ps.ProtocolRequestType(t.method)})(au=lt.DocumentColorRequest||(lt.DocumentColorRequest={}));var cu;(function(t){t.type=new ps.ProtocolRequestType("textDocument/colorPresentation")})(cu=lt.ColorPresentationRequest||(lt.ColorPresentationRequest={}))});var bs=T(ln=>{"use strict";Object.defineProperty(ln,"__esModule",{value:!0});ln.FoldingRangeRequest=void 0;var uu=se(),lu;(function(t){t.method="textDocument/foldingRange",t.type=new uu.ProtocolRequestType(t.method)})(lu=ln.FoldingRangeRequest||(ln.FoldingRangeRequest={}))});var vs=T(dn=>{"use strict";Object.defineProperty(dn,"__esModule",{value:!0});dn.DeclarationRequest=void 0;var du=se(),fu;(function(t){t.method="textDocument/declaration",t.type=new du.ProtocolRequestType(t.method)})(fu=dn.DeclarationRequest||(dn.DeclarationRequest={}))});var Rs=T(fn=>{"use strict";Object.defineProperty(fn,"__esModule",{value:!0});fn.SelectionRangeRequest=void 0;var hu=se(),gu;(function(t){t.method="textDocument/selectionRange",t.type=new hu.ProtocolRequestType(t.method)})(gu=fn.SelectionRangeRequest||(fn.SelectionRangeRequest={}))});var Ds=T(We=>{"use strict";Object.defineProperty(We,"__esModule",{value:!0});We.WorkDoneProgressCancelNotification=We.WorkDoneProgressCreateRequest=We.WorkDoneProgress=void 0;var mu=kt(),_s=se(),pu;(function(t){t.type=new mu.ProgressType;function e(n){return n===t.type}t.is=e})(pu=We.WorkDoneProgress||(We.WorkDoneProgress={}));var yu;(function(t){t.method="window/workDoneProgress/create",t.type=new _s.ProtocolRequestType(t.method)})(yu=We.WorkDoneProgressCreateRequest||(We.WorkDoneProgressCreateRequest={}));var bu;(function(t){t.method="window/workDoneProgress/cancel",t.type=new _s.ProtocolNotificationType(t.method)})(bu=We.WorkDoneProgressCancelNotification||(We.WorkDoneProgressCancelNotification={}))});var qs=T(Ae=>{"use strict";Object.defineProperty(Ae,"__esModule",{value:!0});Ae.CallHierarchyOutgoingCallsRequest=Ae.CallHierarchyIncomingCallsRequest=Ae.CallHierarchyPrepareRequest=void 0;var Ki=se(),vu;(function(t){t.method="textDocument/prepareCallHierarchy",t.type=new Ki.ProtocolRequestType(t.method)})(vu=Ae.CallHierarchyPrepareRequest||(Ae.CallHierarchyPrepareRequest={}));var Ru;(function(t){t.method="callHierarchy/incomingCalls",t.type=new Ki.ProtocolRequestType(t.method)})(Ru=Ae.CallHierarchyIncomingCallsRequest||(Ae.CallHierarchyIncomingCallsRequest={}));var _u;(function(t){t.method="callHierarchy/outgoingCalls",t.type=new Ki.ProtocolRequestType(t.method)})(_u=Ae.CallHierarchyOutgoingCallsRequest||(Ae.CallHierarchyOutgoingCallsRequest={}))});var ws=T(ge=>{"use strict";Object.defineProperty(ge,"__esModule",{value:!0});ge.SemanticTokensRefreshRequest=ge.SemanticTokensRangeRequest=ge.SemanticTokensDeltaRequest=ge.SemanticTokensRequest=ge.SemanticTokensRegistrationType=ge.TokenFormat=void 0;var hn=se(),Du;(function(t){t.Relative="relative"})(Du=ge.TokenFormat||(ge.TokenFormat={}));var qu;(function(t){t.method="textDocument/semanticTokens",t.type=new hn.RegistrationType(t.method)})(qu=ge.SemanticTokensRegistrationType||(ge.SemanticTokensRegistrationType={}));var wu;(function(t){t.method="textDocument/semanticTokens/full",t.type=new hn.ProtocolRequestType(t.method)})(wu=ge.SemanticTokensRequest||(ge.SemanticTokensRequest={}));var Pu;(function(t){t.method="textDocument/semanticTokens/full/delta",t.type=new hn.ProtocolRequestType(t.method)})(Pu=ge.SemanticTokensDeltaRequest||(ge.SemanticTokensDeltaRequest={}));var ku;(function(t){t.method="textDocument/semanticTokens/range",t.type=new hn.ProtocolRequestType(t.method)})(ku=ge.SemanticTokensRangeRequest||(ge.SemanticTokensRangeRequest={}));var Cu;(function(t){t.method="workspace/semanticTokens/refresh",t.type=new hn.ProtocolRequestType0(t.method)})(Cu=ge.SemanticTokensRefreshRequest||(ge.SemanticTokensRefreshRequest={}))});var Ps=T(gn=>{"use strict";Object.defineProperty(gn,"__esModule",{value:!0});gn.ShowDocumentRequest=void 0;var Tu=se(),Su;(function(t){t.method="window/showDocument",t.type=new Tu.ProtocolRequestType(t.method)})(Su=gn.ShowDocumentRequest||(gn.ShowDocumentRequest={}))});var ks=T(mn=>{"use strict";Object.defineProperty(mn,"__esModule",{value:!0});mn.LinkedEditingRangeRequest=void 0;var Nu=se(),Ou;(function(t){t.method="textDocument/linkedEditingRange",t.type=new Nu.ProtocolRequestType(t.method)})(Ou=mn.LinkedEditingRangeRequest||(mn.LinkedEditingRangeRequest={}))});var Cs=T(ae=>{"use strict";Object.defineProperty(ae,"__esModule",{value:!0});ae.WillDeleteFilesRequest=ae.DidDeleteFilesNotification=ae.DidRenameFilesNotification=ae.WillRenameFilesRequest=ae.DidCreateFilesNotification=ae.WillCreateFilesRequest=ae.FileOperationPatternKind=void 0;var Bt=se(),Eu;(function(t){t.file="file",t.folder="folder"})(Eu=ae.FileOperationPatternKind||(ae.FileOperationPatternKind={}));var ju;(function(t){t.method="workspace/willCreateFiles",t.type=new Bt.ProtocolRequestType(t.method)})(ju=ae.WillCreateFilesRequest||(ae.WillCreateFilesRequest={}));var Fu;(function(t){t.method="workspace/didCreateFiles",t.type=new Bt.ProtocolNotificationType(t.method)})(Fu=ae.DidCreateFilesNotification||(ae.DidCreateFilesNotification={}));var Mu;(function(t){t.method="workspace/willRenameFiles",t.type=new Bt.ProtocolRequestType(t.method)})(Mu=ae.WillRenameFilesRequest||(ae.WillRenameFilesRequest={}));var xu;(function(t){t.method="workspace/didRenameFiles",t.type=new Bt.ProtocolNotificationType(t.method)})(xu=ae.DidRenameFilesNotification||(ae.DidRenameFilesNotification={}));var Lu;(function(t){t.method="workspace/didDeleteFiles",t.type=new Bt.ProtocolNotificationType(t.method)})(Lu=ae.DidDeleteFilesNotification||(ae.DidDeleteFilesNotification={}));var Iu;(function(t){t.method="workspace/willDeleteFiles",t.type=new Bt.ProtocolRequestType(t.method)})(Iu=ae.WillDeleteFilesRequest||(ae.WillDeleteFilesRequest={}))});var Ts=T(He=>{"use strict";Object.defineProperty(He,"__esModule",{value:!0});He.MonikerRequest=He.MonikerKind=He.UniquenessLevel=void 0;var Wu=se(),Au;(function(t){t.document="document",t.project="project",t.group="group",t.scheme="scheme",t.global="global"})(Au=He.UniquenessLevel||(He.UniquenessLevel={}));var Hu;(function(t){t.$import="import",t.$export="export",t.local="local"})(Hu=He.MonikerKind||(He.MonikerKind={}));var zu;(function(t){t.method="textDocument/moniker",t.type=new Wu.ProtocolRequestType(t.method)})(zu=He.MonikerRequest||(He.MonikerRequest={}))});var Ss=T(ze=>{"use strict";Object.defineProperty(ze,"__esModule",{value:!0});ze.TypeHierarchySubtypesRequest=ze.TypeHierarchySupertypesRequest=ze.TypeHierarchyPrepareRequest=void 0;var Xi=se(),$u;(function(t){t.method="textDocument/prepareTypeHierarchy",t.type=new Xi.ProtocolRequestType(t.method)})($u=ze.TypeHierarchyPrepareRequest||(ze.TypeHierarchyPrepareRequest={}));var Bu;(function(t){t.method="typeHierarchy/supertypes",t.type=new Xi.ProtocolRequestType(t.method)})(Bu=ze.TypeHierarchySupertypesRequest||(ze.TypeHierarchySupertypesRequest={}));var Uu;(function(t){t.method="typeHierarchy/subtypes",t.type=new Xi.ProtocolRequestType(t.method)})(Uu=ze.TypeHierarchySubtypesRequest||(ze.TypeHierarchySubtypesRequest={}))});var Os=T(dt=>{"use strict";Object.defineProperty(dt,"__esModule",{value:!0});dt.InlineValueRefreshRequest=dt.InlineValueRequest=void 0;var Ns=se(),Vu;(function(t){t.method="textDocument/inlineValue",t.type=new Ns.ProtocolRequestType(t.method)})(Vu=dt.InlineValueRequest||(dt.InlineValueRequest={}));var Ju;(function(t){t.method="workspace/inlineValue/refresh",t.type=new Ns.ProtocolRequestType0(t.method)})(Ju=dt.InlineValueRefreshRequest||(dt.InlineValueRefreshRequest={}))});var Es=T($e=>{"use strict";Object.defineProperty($e,"__esModule",{value:!0});$e.InlayHintRefreshRequest=$e.InlayHintResolveRequest=$e.InlayHintRequest=void 0;var Qi=se(),Gu;(function(t){t.method="textDocument/inlayHint",t.type=new Qi.ProtocolRequestType(t.method)})(Gu=$e.InlayHintRequest||($e.InlayHintRequest={}));var Ku;(function(t){t.method="inlayHint/resolve",t.type=new Qi.ProtocolRequestType(t.method)})(Ku=$e.InlayHintResolveRequest||($e.InlayHintResolveRequest={}));var Xu;(function(t){t.method="workspace/inlayHint/refresh",t.type=new Qi.ProtocolRequestType0(t.method)})(Xu=$e.InlayHintRefreshRequest||($e.InlayHintRefreshRequest={}))});var Fs=T(be=>{"use strict";Object.defineProperty(be,"__esModule",{value:!0});be.DiagnosticRefreshRequest=be.WorkspaceDiagnosticRequest=be.DocumentDiagnosticRequest=be.DocumentDiagnosticReportKind=be.DiagnosticServerCancellationData=void 0;var js=kt(),Qu=Bn(),Yi=se(),Yu;(function(t){function e(n){let r=n;return r&&Qu.boolean(r.retriggerRequest)}t.is=e})(Yu=be.DiagnosticServerCancellationData||(be.DiagnosticServerCancellationData={}));var Zu;(function(t){t.Full="full",t.Unchanged="unchanged"})(Zu=be.DocumentDiagnosticReportKind||(be.DocumentDiagnosticReportKind={}));var el;(function(t){t.method="textDocument/diagnostic",t.type=new Yi.ProtocolRequestType(t.method),t.partialResult=new js.ProgressType})(el=be.DocumentDiagnosticRequest||(be.DocumentDiagnosticRequest={}));var tl;(function(t){t.method="workspace/diagnostic",t.type=new Yi.ProtocolRequestType(t.method),t.partialResult=new js.ProgressType})(tl=be.WorkspaceDiagnosticRequest||(be.WorkspaceDiagnosticRequest={}));var nl;(function(t){t.method="workspace/diagnostic/refresh",t.type=new Yi.ProtocolRequestType0(t.method)})(nl=be.DiagnosticRefreshRequest||(be.DiagnosticRefreshRequest={}))});var Ls=T(G=>{"use strict";Object.defineProperty(G,"__esModule",{value:!0});G.DidCloseNotebookDocumentNotification=G.DidSaveNotebookDocumentNotification=G.DidChangeNotebookDocumentNotification=G.NotebookCellArrayChange=G.DidOpenNotebookDocumentNotification=G.NotebookDocumentSyncRegistrationType=G.NotebookDocument=G.NotebookCell=G.ExecutionSummary=G.NotebookCellKind=void 0;var pn=$n(),Be=Bn(),yn=se(),Ms;(function(t){t.Markup=1,t.Code=2;function e(n){return n===1||n===2}t.is=e})(Ms=G.NotebookCellKind||(G.NotebookCellKind={}));var xs;(function(t){function e(i,d){let y={executionOrder:i};return(d===!0||d===!1)&&(y.success=d),y}t.create=e;function n(i){let d=i;return Be.objectLiteral(d)&&pn.uinteger.is(d.executionOrder)&&(d.success===void 0||Be.boolean(d.success))}t.is=n;function r(i,d){return i===d?!0:i==null||d===null||d===void 0?!1:i.executionOrder===d.executionOrder&&i.success===d.success}t.equals=r})(xs=G.ExecutionSummary||(G.ExecutionSummary={}));var Zi;(function(t){function e(d,y){return{kind:d,document:y}}t.create=e;function n(d){let y=d;return Be.objectLiteral(y)&&Ms.is(y.kind)&&pn.DocumentUri.is(y.document)&&(y.metadata===void 0||Be.objectLiteral(y.metadata))}t.is=n;function r(d,y){let _=new Set;return d.document!==y.document&&_.add("document"),d.kind!==y.kind&&_.add("kind"),d.executionSummary!==y.executionSummary&&_.add("executionSummary"),(d.metadata!==void 0||y.metadata!==void 0)&&!i(d.metadata,y.metadata)&&_.add("metadata"),(d.executionSummary!==void 0||y.executionSummary!==void 0)&&!xs.equals(d.executionSummary,y.executionSummary)&&_.add("executionSummary"),_}t.diff=r;function i(d,y){if(d===y)return!0;if(d==null||y===null||y===void 0||typeof d!=typeof y||typeof d!="object")return!1;let _=Array.isArray(d),P=Array.isArray(y);if(_!==P)return!1;if(_&&P){if(d.length!==y.length)return!1;for(let D=0;D<d.length;D++)if(!i(d[D],y[D]))return!1}if(Be.objectLiteral(d)&&Be.objectLiteral(y)){let D=Object.keys(d),w=Object.keys(y);if(D.length!==w.length||(D.sort(),w.sort(),!i(D,w)))return!1;for(let N=0;N<D.length;N++){let S=D[N];if(!i(d[S],y[S]))return!1}}return!0}})(Zi=G.NotebookCell||(G.NotebookCell={}));var rl;(function(t){function e(r,i,d,y){return{uri:r,notebookType:i,version:d,cells:y}}t.create=e;function n(r){let i=r;return Be.objectLiteral(i)&&Be.string(i.uri)&&pn.integer.is(i.version)&&Be.typedArray(i.cells,Zi.is)}t.is=n})(rl=G.NotebookDocument||(G.NotebookDocument={}));var il;(function(t){t.method="notebookDocument/sync",t.type=new yn.RegistrationType(t.method)})(il=G.NotebookDocumentSyncRegistrationType||(G.NotebookDocumentSyncRegistrationType={}));var ol;(function(t){t.method="notebookDocument/didOpen",t.type=new yn.ProtocolNotificationType(t.method)})(ol=G.DidOpenNotebookDocumentNotification||(G.DidOpenNotebookDocumentNotification={}));var sl;(function(t){function e(r){let i=r;return Be.objectLiteral(i)&&pn.uinteger.is(i.start)&&pn.uinteger.is(i.deleteCount)&&(i.cells===void 0||Be.typedArray(i.cells,Zi.is))}t.is=e;function n(r,i,d){let y={start:r,deleteCount:i};return d!==void 0&&(y.cells=d),y}t.create=n})(sl=G.NotebookCellArrayChange||(G.NotebookCellArrayChange={}));var al;(function(t){t.method="notebookDocument/didChange",t.type=new yn.ProtocolNotificationType(t.method)})(al=G.DidChangeNotebookDocumentNotification||(G.DidChangeNotebookDocumentNotification={}));var cl;(function(t){t.method="notebookDocument/didSave",t.type=new yn.ProtocolNotificationType(t.method)})(cl=G.DidSaveNotebookDocumentNotification||(G.DidSaveNotebookDocumentNotification={}));var ul;(function(t){t.method="notebookDocument/didClose",t.type=new yn.ProtocolNotificationType(t.method)})(ul=G.DidCloseNotebookDocumentNotification||(G.DidCloseNotebookDocumentNotification={}))});var Vs=T(a=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.WorkspaceSymbolRequest=a.CodeActionResolveRequest=a.CodeActionRequest=a.DocumentSymbolRequest=a.DocumentHighlightRequest=a.ReferencesRequest=a.DefinitionRequest=a.SignatureHelpRequest=a.SignatureHelpTriggerKind=a.HoverRequest=a.CompletionResolveRequest=a.CompletionRequest=a.CompletionTriggerKind=a.PublishDiagnosticsNotification=a.WatchKind=a.RelativePattern=a.FileChangeType=a.DidChangeWatchedFilesNotification=a.WillSaveTextDocumentWaitUntilRequest=a.WillSaveTextDocumentNotification=a.TextDocumentSaveReason=a.DidSaveTextDocumentNotification=a.DidCloseTextDocumentNotification=a.DidChangeTextDocumentNotification=a.TextDocumentContentChangeEvent=a.DidOpenTextDocumentNotification=a.TextDocumentSyncKind=a.TelemetryEventNotification=a.LogMessageNotification=a.ShowMessageRequest=a.ShowMessageNotification=a.MessageType=a.DidChangeConfigurationNotification=a.ExitNotification=a.ShutdownRequest=a.InitializedNotification=a.InitializeErrorCodes=a.InitializeRequest=a.WorkDoneProgressOptions=a.TextDocumentRegistrationOptions=a.StaticRegistrationOptions=a.PositionEncodingKind=a.FailureHandlingKind=a.ResourceOperationKind=a.UnregistrationRequest=a.RegistrationRequest=a.DocumentSelector=a.NotebookCellTextDocumentFilter=a.NotebookDocumentFilter=a.TextDocumentFilter=void 0;a.TypeHierarchySubtypesRequest=a.TypeHierarchyPrepareRequest=a.MonikerRequest=a.MonikerKind=a.UniquenessLevel=a.WillDeleteFilesRequest=a.DidDeleteFilesNotification=a.WillRenameFilesRequest=a.DidRenameFilesNotification=a.WillCreateFilesRequest=a.DidCreateFilesNotification=a.FileOperationPatternKind=a.LinkedEditingRangeRequest=a.ShowDocumentRequest=a.SemanticTokensRegistrationType=a.SemanticTokensRefreshRequest=a.SemanticTokensRangeRequest=a.SemanticTokensDeltaRequest=a.SemanticTokensRequest=a.TokenFormat=a.CallHierarchyPrepareRequest=a.CallHierarchyOutgoingCallsRequest=a.CallHierarchyIncomingCallsRequest=a.WorkDoneProgressCancelNotification=a.WorkDoneProgressCreateRequest=a.WorkDoneProgress=a.SelectionRangeRequest=a.DeclarationRequest=a.FoldingRangeRequest=a.ColorPresentationRequest=a.DocumentColorRequest=a.ConfigurationRequest=a.DidChangeWorkspaceFoldersNotification=a.WorkspaceFoldersRequest=a.TypeDefinitionRequest=a.ImplementationRequest=a.ApplyWorkspaceEditRequest=a.ExecuteCommandRequest=a.PrepareRenameRequest=a.RenameRequest=a.PrepareSupportDefaultBehavior=a.DocumentOnTypeFormattingRequest=a.DocumentRangeFormattingRequest=a.DocumentFormattingRequest=a.DocumentLinkResolveRequest=a.DocumentLinkRequest=a.CodeLensRefreshRequest=a.CodeLensResolveRequest=a.CodeLensRequest=a.WorkspaceSymbolResolveRequest=void 0;a.DidCloseNotebookDocumentNotification=a.DidSaveNotebookDocumentNotification=a.DidChangeNotebookDocumentNotification=a.NotebookCellArrayChange=a.DidOpenNotebookDocumentNotification=a.NotebookDocumentSyncRegistrationType=a.NotebookDocument=a.NotebookCell=a.ExecutionSummary=a.NotebookCellKind=a.DiagnosticRefreshRequest=a.WorkspaceDiagnosticRequest=a.DocumentDiagnosticRequest=a.DocumentDiagnosticReportKind=a.DiagnosticServerCancellationData=a.InlayHintRefreshRequest=a.InlayHintResolveRequest=a.InlayHintRequest=a.InlineValueRefreshRequest=a.InlineValueRequest=a.TypeHierarchySupertypesRequest=void 0;var W=se(),Is=$n(),ve=Bn(),ll=ds();Object.defineProperty(a,"ImplementationRequest",{enumerable:!0,get:function(){return ll.ImplementationRequest}});var dl=fs();Object.defineProperty(a,"TypeDefinitionRequest",{enumerable:!0,get:function(){return dl.TypeDefinitionRequest}});var Ws=gs();Object.defineProperty(a,"WorkspaceFoldersRequest",{enumerable:!0,get:function(){return Ws.WorkspaceFoldersRequest}});Object.defineProperty(a,"DidChangeWorkspaceFoldersNotification",{enumerable:!0,get:function(){return Ws.DidChangeWorkspaceFoldersNotification}});var fl=ms();Object.defineProperty(a,"ConfigurationRequest",{enumerable:!0,get:function(){return fl.ConfigurationRequest}});var As=ys();Object.defineProperty(a,"DocumentColorRequest",{enumerable:!0,get:function(){return As.DocumentColorRequest}});Object.defineProperty(a,"ColorPresentationRequest",{enumerable:!0,get:function(){return As.ColorPresentationRequest}});var hl=bs();Object.defineProperty(a,"FoldingRangeRequest",{enumerable:!0,get:function(){return hl.FoldingRangeRequest}});var gl=vs();Object.defineProperty(a,"DeclarationRequest",{enumerable:!0,get:function(){return gl.DeclarationRequest}});var ml=Rs();Object.defineProperty(a,"SelectionRangeRequest",{enumerable:!0,get:function(){return ml.SelectionRangeRequest}});var eo=Ds();Object.defineProperty(a,"WorkDoneProgress",{enumerable:!0,get:function(){return eo.WorkDoneProgress}});Object.defineProperty(a,"WorkDoneProgressCreateRequest",{enumerable:!0,get:function(){return eo.WorkDoneProgressCreateRequest}});Object.defineProperty(a,"WorkDoneProgressCancelNotification",{enumerable:!0,get:function(){return eo.WorkDoneProgressCancelNotification}});var to=qs();Object.defineProperty(a,"CallHierarchyIncomingCallsRequest",{enumerable:!0,get:function(){return to.CallHierarchyIncomingCallsRequest}});Object.defineProperty(a,"CallHierarchyOutgoingCallsRequest",{enumerable:!0,get:function(){return to.CallHierarchyOutgoingCallsRequest}});Object.defineProperty(a,"CallHierarchyPrepareRequest",{enumerable:!0,get:function(){return to.CallHierarchyPrepareRequest}});var Ut=ws();Object.defineProperty(a,"TokenFormat",{enumerable:!0,get:function(){return Ut.TokenFormat}});Object.defineProperty(a,"SemanticTokensRequest",{enumerable:!0,get:function(){return Ut.SemanticTokensRequest}});Object.defineProperty(a,"SemanticTokensDeltaRequest",{enumerable:!0,get:function(){return Ut.SemanticTokensDeltaRequest}});Object.defineProperty(a,"SemanticTokensRangeRequest",{enumerable:!0,get:function(){return Ut.SemanticTokensRangeRequest}});Object.defineProperty(a,"SemanticTokensRefreshRequest",{enumerable:!0,get:function(){return Ut.SemanticTokensRefreshRequest}});Object.defineProperty(a,"SemanticTokensRegistrationType",{enumerable:!0,get:function(){return Ut.SemanticTokensRegistrationType}});var pl=Ps();Object.defineProperty(a,"ShowDocumentRequest",{enumerable:!0,get:function(){return pl.ShowDocumentRequest}});var yl=ks();Object.defineProperty(a,"LinkedEditingRangeRequest",{enumerable:!0,get:function(){return yl.LinkedEditingRangeRequest}});var Ct=Cs();Object.defineProperty(a,"FileOperationPatternKind",{enumerable:!0,get:function(){return Ct.FileOperationPatternKind}});Object.defineProperty(a,"DidCreateFilesNotification",{enumerable:!0,get:function(){return Ct.DidCreateFilesNotification}});Object.defineProperty(a,"WillCreateFilesRequest",{enumerable:!0,get:function(){return Ct.WillCreateFilesRequest}});Object.defineProperty(a,"DidRenameFilesNotification",{enumerable:!0,get:function(){return Ct.DidRenameFilesNotification}});Object.defineProperty(a,"WillRenameFilesRequest",{enumerable:!0,get:function(){return Ct.WillRenameFilesRequest}});Object.defineProperty(a,"DidDeleteFilesNotification",{enumerable:!0,get:function(){return Ct.DidDeleteFilesNotification}});Object.defineProperty(a,"WillDeleteFilesRequest",{enumerable:!0,get:function(){return Ct.WillDeleteFilesRequest}});var no=Ts();Object.defineProperty(a,"UniquenessLevel",{enumerable:!0,get:function(){return no.UniquenessLevel}});Object.defineProperty(a,"MonikerKind",{enumerable:!0,get:function(){return no.MonikerKind}});Object.defineProperty(a,"MonikerRequest",{enumerable:!0,get:function(){return no.MonikerRequest}});var ro=Ss();Object.defineProperty(a,"TypeHierarchyPrepareRequest",{enumerable:!0,get:function(){return ro.TypeHierarchyPrepareRequest}});Object.defineProperty(a,"TypeHierarchySubtypesRequest",{enumerable:!0,get:function(){return ro.TypeHierarchySubtypesRequest}});Object.defineProperty(a,"TypeHierarchySupertypesRequest",{enumerable:!0,get:function(){return ro.TypeHierarchySupertypesRequest}});var Hs=Os();Object.defineProperty(a,"InlineValueRequest",{enumerable:!0,get:function(){return Hs.InlineValueRequest}});Object.defineProperty(a,"InlineValueRefreshRequest",{enumerable:!0,get:function(){return Hs.InlineValueRefreshRequest}});var io=Es();Object.defineProperty(a,"InlayHintRequest",{enumerable:!0,get:function(){return io.InlayHintRequest}});Object.defineProperty(a,"InlayHintResolveRequest",{enumerable:!0,get:function(){return io.InlayHintResolveRequest}});Object.defineProperty(a,"InlayHintRefreshRequest",{enumerable:!0,get:function(){return io.InlayHintRefreshRequest}});var bn=Fs();Object.defineProperty(a,"DiagnosticServerCancellationData",{enumerable:!0,get:function(){return bn.DiagnosticServerCancellationData}});Object.defineProperty(a,"DocumentDiagnosticReportKind",{enumerable:!0,get:function(){return bn.DocumentDiagnosticReportKind}});Object.defineProperty(a,"DocumentDiagnosticRequest",{enumerable:!0,get:function(){return bn.DocumentDiagnosticRequest}});Object.defineProperty(a,"WorkspaceDiagnosticRequest",{enumerable:!0,get:function(){return bn.WorkspaceDiagnosticRequest}});Object.defineProperty(a,"DiagnosticRefreshRequest",{enumerable:!0,get:function(){return bn.DiagnosticRefreshRequest}});var Ke=Ls();Object.defineProperty(a,"NotebookCellKind",{enumerable:!0,get:function(){return Ke.NotebookCellKind}});Object.defineProperty(a,"ExecutionSummary",{enumerable:!0,get:function(){return Ke.ExecutionSummary}});Object.defineProperty(a,"NotebookCell",{enumerable:!0,get:function(){return Ke.NotebookCell}});Object.defineProperty(a,"NotebookDocument",{enumerable:!0,get:function(){return Ke.NotebookDocument}});Object.defineProperty(a,"NotebookDocumentSyncRegistrationType",{enumerable:!0,get:function(){return Ke.NotebookDocumentSyncRegistrationType}});Object.defineProperty(a,"DidOpenNotebookDocumentNotification",{enumerable:!0,get:function(){return Ke.DidOpenNotebookDocumentNotification}});Object.defineProperty(a,"NotebookCellArrayChange",{enumerable:!0,get:function(){return Ke.NotebookCellArrayChange}});Object.defineProperty(a,"DidChangeNotebookDocumentNotification",{enumerable:!0,get:function(){return Ke.DidChangeNotebookDocumentNotification}});Object.defineProperty(a,"DidSaveNotebookDocumentNotification",{enumerable:!0,get:function(){return Ke.DidSaveNotebookDocumentNotification}});Object.defineProperty(a,"DidCloseNotebookDocumentNotification",{enumerable:!0,get:function(){return Ke.DidCloseNotebookDocumentNotification}});var zs;(function(t){function e(n){let r=n;return ve.string(r.language)||ve.string(r.scheme)||ve.string(r.pattern)}t.is=e})(zs=a.TextDocumentFilter||(a.TextDocumentFilter={}));var $s;(function(t){function e(n){let r=n;return ve.objectLiteral(r)&&(ve.string(r.notebookType)||ve.string(r.scheme)||ve.string(r.pattern))}t.is=e})($s=a.NotebookDocumentFilter||(a.NotebookDocumentFilter={}));var Bs;(function(t){function e(n){let r=n;return ve.objectLiteral(r)&&(ve.string(r.notebook)||$s.is(r.notebook))&&(r.language===void 0||ve.string(r.language))}t.is=e})(Bs=a.NotebookCellTextDocumentFilter||(a.NotebookCellTextDocumentFilter={}));var Us;(function(t){function e(n){if(!Array.isArray(n))return!1;for(let r of n)if(!ve.string(r)&&!zs.is(r)&&!Bs.is(r))return!1;return!0}t.is=e})(Us=a.DocumentSelector||(a.DocumentSelector={}));var bl;(function(t){t.type=new W.ProtocolRequestType("client/registerCapability")})(bl=a.RegistrationRequest||(a.RegistrationRequest={}));var vl;(function(t){t.type=new W.ProtocolRequestType("client/unregisterCapability")})(vl=a.UnregistrationRequest||(a.UnregistrationRequest={}));var Rl;(function(t){t.Create="create",t.Rename="rename",t.Delete="delete"})(Rl=a.ResourceOperationKind||(a.ResourceOperationKind={}));var _l;(function(t){t.Abort="abort",t.Transactional="transactional",t.TextOnlyTransactional="textOnlyTransactional",t.Undo="undo"})(_l=a.FailureHandlingKind||(a.FailureHandlingKind={}));var Dl;(function(t){t.UTF8="utf-8",t.UTF16="utf-16",t.UTF32="utf-32"})(Dl=a.PositionEncodingKind||(a.PositionEncodingKind={}));var ql;(function(t){function e(n){let r=n;return r&&ve.string(r.id)&&r.id.length>0}t.hasId=e})(ql=a.StaticRegistrationOptions||(a.StaticRegistrationOptions={}));var wl;(function(t){function e(n){let r=n;return r&&(r.documentSelector===null||Us.is(r.documentSelector))}t.is=e})(wl=a.TextDocumentRegistrationOptions||(a.TextDocumentRegistrationOptions={}));var Pl;(function(t){function e(r){let i=r;return ve.objectLiteral(i)&&(i.workDoneProgress===void 0||ve.boolean(i.workDoneProgress))}t.is=e;function n(r){let i=r;return i&&ve.boolean(i.workDoneProgress)}t.hasWorkDoneProgress=n})(Pl=a.WorkDoneProgressOptions||(a.WorkDoneProgressOptions={}));var kl;(function(t){t.type=new W.ProtocolRequestType("initialize")})(kl=a.InitializeRequest||(a.InitializeRequest={}));var Cl;(function(t){t.unknownProtocolVersion=1})(Cl=a.InitializeErrorCodes||(a.InitializeErrorCodes={}));var Tl;(function(t){t.type=new W.ProtocolNotificationType("initialized")})(Tl=a.InitializedNotification||(a.InitializedNotification={}));var Sl;(function(t){t.type=new W.ProtocolRequestType0("shutdown")})(Sl=a.ShutdownRequest||(a.ShutdownRequest={}));var Nl;(function(t){t.type=new W.ProtocolNotificationType0("exit")})(Nl=a.ExitNotification||(a.ExitNotification={}));var Ol;(function(t){t.type=new W.ProtocolNotificationType("workspace/didChangeConfiguration")})(Ol=a.DidChangeConfigurationNotification||(a.DidChangeConfigurationNotification={}));var El;(function(t){t.Error=1,t.Warning=2,t.Info=3,t.Log=4})(El=a.MessageType||(a.MessageType={}));var jl;(function(t){t.type=new W.ProtocolNotificationType("window/showMessage")})(jl=a.ShowMessageNotification||(a.ShowMessageNotification={}));var Fl;(function(t){t.type=new W.ProtocolRequestType("window/showMessageRequest")})(Fl=a.ShowMessageRequest||(a.ShowMessageRequest={}));var Ml;(function(t){t.type=new W.ProtocolNotificationType("window/logMessage")})(Ml=a.LogMessageNotification||(a.LogMessageNotification={}));var xl;(function(t){t.type=new W.ProtocolNotificationType("telemetry/event")})(xl=a.TelemetryEventNotification||(a.TelemetryEventNotification={}));var Ll;(function(t){t.None=0,t.Full=1,t.Incremental=2})(Ll=a.TextDocumentSyncKind||(a.TextDocumentSyncKind={}));var Il;(function(t){t.method="textDocument/didOpen",t.type=new W.ProtocolNotificationType(t.method)})(Il=a.DidOpenTextDocumentNotification||(a.DidOpenTextDocumentNotification={}));var Wl;(function(t){function e(r){let i=r;return i!=null&&typeof i.text=="string"&&i.range!==void 0&&(i.rangeLength===void 0||typeof i.rangeLength=="number")}t.isIncremental=e;function n(r){let i=r;return i!=null&&typeof i.text=="string"&&i.range===void 0&&i.rangeLength===void 0}t.isFull=n})(Wl=a.TextDocumentContentChangeEvent||(a.TextDocumentContentChangeEvent={}));var Al;(function(t){t.method="textDocument/didChange",t.type=new W.ProtocolNotificationType(t.method)})(Al=a.DidChangeTextDocumentNotification||(a.DidChangeTextDocumentNotification={}));var Hl;(function(t){t.method="textDocument/didClose",t.type=new W.ProtocolNotificationType(t.method)})(Hl=a.DidCloseTextDocumentNotification||(a.DidCloseTextDocumentNotification={}));var zl;(function(t){t.method="textDocument/didSave",t.type=new W.ProtocolNotificationType(t.method)})(zl=a.DidSaveTextDocumentNotification||(a.DidSaveTextDocumentNotification={}));var $l;(function(t){t.Manual=1,t.AfterDelay=2,t.FocusOut=3})($l=a.TextDocumentSaveReason||(a.TextDocumentSaveReason={}));var Bl;(function(t){t.method="textDocument/willSave",t.type=new W.ProtocolNotificationType(t.method)})(Bl=a.WillSaveTextDocumentNotification||(a.WillSaveTextDocumentNotification={}));var Ul;(function(t){t.method="textDocument/willSaveWaitUntil",t.type=new W.ProtocolRequestType(t.method)})(Ul=a.WillSaveTextDocumentWaitUntilRequest||(a.WillSaveTextDocumentWaitUntilRequest={}));var Vl;(function(t){t.type=new W.ProtocolNotificationType("workspace/didChangeWatchedFiles")})(Vl=a.DidChangeWatchedFilesNotification||(a.DidChangeWatchedFilesNotification={}));var Jl;(function(t){t.Created=1,t.Changed=2,t.Deleted=3})(Jl=a.FileChangeType||(a.FileChangeType={}));var Gl;(function(t){function e(n){let r=n;return ve.objectLiteral(r)&&(Is.URI.is(r.baseUri)||Is.WorkspaceFolder.is(r.baseUri))&&ve.string(r.pattern)}t.is=e})(Gl=a.RelativePattern||(a.RelativePattern={}));var Kl;(function(t){t.Create=1,t.Change=2,t.Delete=4})(Kl=a.WatchKind||(a.WatchKind={}));var Xl;(function(t){t.type=new W.ProtocolNotificationType("textDocument/publishDiagnostics")})(Xl=a.PublishDiagnosticsNotification||(a.PublishDiagnosticsNotification={}));var Ql;(function(t){t.Invoked=1,t.TriggerCharacter=2,t.TriggerForIncompleteCompletions=3})(Ql=a.CompletionTriggerKind||(a.CompletionTriggerKind={}));var Yl;(function(t){t.method="textDocument/completion",t.type=new W.ProtocolRequestType(t.method)})(Yl=a.CompletionRequest||(a.CompletionRequest={}));var Zl;(function(t){t.method="completionItem/resolve",t.type=new W.ProtocolRequestType(t.method)})(Zl=a.CompletionResolveRequest||(a.CompletionResolveRequest={}));var ed;(function(t){t.method="textDocument/hover",t.type=new W.ProtocolRequestType(t.method)})(ed=a.HoverRequest||(a.HoverRequest={}));var td;(function(t){t.Invoked=1,t.TriggerCharacter=2,t.ContentChange=3})(td=a.SignatureHelpTriggerKind||(a.SignatureHelpTriggerKind={}));var nd;(function(t){t.method="textDocument/signatureHelp",t.type=new W.ProtocolRequestType(t.method)})(nd=a.SignatureHelpRequest||(a.SignatureHelpRequest={}));var rd;(function(t){t.method="textDocument/definition",t.type=new W.ProtocolRequestType(t.method)})(rd=a.DefinitionRequest||(a.DefinitionRequest={}));var id;(function(t){t.method="textDocument/references",t.type=new W.ProtocolRequestType(t.method)})(id=a.ReferencesRequest||(a.ReferencesRequest={}));var od;(function(t){t.method="textDocument/documentHighlight",t.type=new W.ProtocolRequestType(t.method)})(od=a.DocumentHighlightRequest||(a.DocumentHighlightRequest={}));var sd;(function(t){t.method="textDocument/documentSymbol",t.type=new W.ProtocolRequestType(t.method)})(sd=a.DocumentSymbolRequest||(a.DocumentSymbolRequest={}));var ad;(function(t){t.method="textDocument/codeAction",t.type=new W.ProtocolRequestType(t.method)})(ad=a.CodeActionRequest||(a.CodeActionRequest={}));var cd;(function(t){t.method="codeAction/resolve",t.type=new W.ProtocolRequestType(t.method)})(cd=a.CodeActionResolveRequest||(a.CodeActionResolveRequest={}));var ud;(function(t){t.method="workspace/symbol",t.type=new W.ProtocolRequestType(t.method)})(ud=a.WorkspaceSymbolRequest||(a.WorkspaceSymbolRequest={}));var ld;(function(t){t.method="workspaceSymbol/resolve",t.type=new W.ProtocolRequestType(t.method)})(ld=a.WorkspaceSymbolResolveRequest||(a.WorkspaceSymbolResolveRequest={}));var dd;(function(t){t.method="textDocument/codeLens",t.type=new W.ProtocolRequestType(t.method)})(dd=a.CodeLensRequest||(a.CodeLensRequest={}));var fd;(function(t){t.method="codeLens/resolve",t.type=new W.ProtocolRequestType(t.method)})(fd=a.CodeLensResolveRequest||(a.CodeLensResolveRequest={}));var hd;(function(t){t.method="workspace/codeLens/refresh",t.type=new W.ProtocolRequestType0(t.method)})(hd=a.CodeLensRefreshRequest||(a.CodeLensRefreshRequest={}));var gd;(function(t){t.method="textDocument/documentLink",t.type=new W.ProtocolRequestType(t.method)})(gd=a.DocumentLinkRequest||(a.DocumentLinkRequest={}));var md;(function(t){t.method="documentLink/resolve",t.type=new W.ProtocolRequestType(t.method)})(md=a.DocumentLinkResolveRequest||(a.DocumentLinkResolveRequest={}));var pd;(function(t){t.method="textDocument/formatting",t.type=new W.ProtocolRequestType(t.method)})(pd=a.DocumentFormattingRequest||(a.DocumentFormattingRequest={}));var yd;(function(t){t.method="textDocument/rangeFormatting",t.type=new W.ProtocolRequestType(t.method)})(yd=a.DocumentRangeFormattingRequest||(a.DocumentRangeFormattingRequest={}));var bd;(function(t){t.method="textDocument/onTypeFormatting",t.type=new W.ProtocolRequestType(t.method)})(bd=a.DocumentOnTypeFormattingRequest||(a.DocumentOnTypeFormattingRequest={}));var vd;(function(t){t.Identifier=1})(vd=a.PrepareSupportDefaultBehavior||(a.PrepareSupportDefaultBehavior={}));var Rd;(function(t){t.method="textDocument/rename",t.type=new W.ProtocolRequestType(t.method)})(Rd=a.RenameRequest||(a.RenameRequest={}));var _d;(function(t){t.method="textDocument/prepareRename",t.type=new W.ProtocolRequestType(t.method)})(_d=a.PrepareRenameRequest||(a.PrepareRenameRequest={}));var Dd;(function(t){t.type=new W.ProtocolRequestType("workspace/executeCommand")})(Dd=a.ExecuteCommandRequest||(a.ExecuteCommandRequest={}));var qd;(function(t){t.type=new W.ProtocolRequestType("workspace/applyEdit")})(qd=a.ApplyWorkspaceEditRequest||(a.ApplyWorkspaceEditRequest={}))});var Gs=T(Un=>{"use strict";Object.defineProperty(Un,"__esModule",{value:!0});Un.createProtocolConnection=void 0;var Js=kt();function wd(t,e,n,r){return Js.ConnectionStrategy.is(r)&&(r={connectionStrategy:r}),(0,Js.createMessageConnection)(t,e,n,r)}Un.createProtocolConnection=wd});var Ks=T(ke=>{"use strict";var Pd=ke&&ke.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),Vn=ke&&ke.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&Pd(e,t,n)};Object.defineProperty(ke,"__esModule",{value:!0});ke.LSPErrorCodes=ke.createProtocolConnection=void 0;Vn(kt(),ke);Vn($n(),ke);Vn(se(),ke);Vn(Vs(),ke);var kd=Gs();Object.defineProperty(ke,"createProtocolConnection",{enumerable:!0,get:function(){return kd.createProtocolConnection}});var Cd;(function(t){t.lspReservedErrorRangeStart=-32899,t.RequestFailed=-32803,t.ServerCancelled=-32802,t.ContentModified=-32801,t.RequestCancelled=-32800,t.lspReservedErrorRangeEnd=-32800})(Cd=ke.LSPErrorCodes||(ke.LSPErrorCodes={}))});var pe=T(Xe=>{"use strict";var Td=Xe&&Xe.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),Xs=Xe&&Xe.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&Td(e,t,n)};Object.defineProperty(Xe,"__esModule",{value:!0});Xe.createProtocolConnection=void 0;var Sd=$i();Xs($i(),Xe);Xs(Ks(),Xe);function Nd(t,e,n,r){return(0,Sd.createMessageConnection)(t,e,n,r)}Xe.createProtocolConnection=Nd});var oo=T(Ee=>{"use strict";Object.defineProperty(Ee,"__esModule",{value:!0});Ee.generateUuid=Ee.parse=Ee.isUUID=Ee.v4=Ee.empty=void 0;var vn=class{constructor(e){this._value=e}asHex(){return this._value}equals(e){return this.asHex()===e.asHex()}},A=class extends vn{constructor(){super([A._randomHex(),A._randomHex(),A._randomHex(),A._randomHex(),A._randomHex(),A._randomHex(),A._randomHex(),A._randomHex(),"-",A._randomHex(),A._randomHex(),A._randomHex(),A._randomHex(),"-","4",A._randomHex(),A._randomHex(),A._randomHex(),"-",A._oneOf(A._timeHighBits),A._randomHex(),A._randomHex(),A._randomHex(),"-",A._randomHex(),A._randomHex(),A._randomHex(),A._randomHex(),A._randomHex(),A._randomHex(),A._randomHex(),A._randomHex(),A._randomHex(),A._randomHex(),A._randomHex(),A._randomHex()].join(""))}static _oneOf(e){return e[Math.floor(e.length*Math.random())]}static _randomHex(){return A._oneOf(A._chars)}};A._chars=["0","1","2","3","4","5","6","6","7","8","9","a","b","c","d","e","f"];A._timeHighBits=["8","9","a","b"];Ee.empty=new vn("00000000-0000-0000-0000-000000000000");function Qs(){return new A}Ee.v4=Qs;var Od=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;function Ys(t){return Od.test(t)}Ee.isUUID=Ys;function Ed(t){if(!Ys(t))throw new Error("invalid uuid");return new vn(t)}Ee.parse=Ed;function jd(){return Qs().asHex()}Ee.generateUuid=jd});var Zs=T(ht=>{"use strict";Object.defineProperty(ht,"__esModule",{value:!0});ht.attachPartialResult=ht.ProgressFeature=ht.attachWorkDone=void 0;var ft=pe(),Fd=oo(),Qe=class{constructor(e,n){this._connection=e,this._token=n,Qe.Instances.set(this._token,this)}begin(e,n,r,i){let d={kind:"begin",title:e,percentage:n,message:r,cancellable:i};this._connection.sendProgress(ft.WorkDoneProgress.type,this._token,d)}report(e,n){let r={kind:"report"};typeof e=="number"?(r.percentage=e,n!==void 0&&(r.message=n)):r.message=e,this._connection.sendProgress(ft.WorkDoneProgress.type,this._token,r)}done(){Qe.Instances.delete(this._token),this._connection.sendProgress(ft.WorkDoneProgress.type,this._token,{kind:"end"})}};Qe.Instances=new Map;var Jn=class extends Qe{constructor(e,n){super(e,n),this._source=new ft.CancellationTokenSource}get token(){return this._source.token}done(){this._source.dispose(),super.done()}cancel(){this._source.cancel()}},Rn=class{constructor(){}begin(){}report(){}done(){}},Gn=class extends Rn{constructor(){super(),this._source=new ft.CancellationTokenSource}get token(){return this._source.token}done(){this._source.dispose()}cancel(){this._source.cancel()}};function Md(t,e){if(e===void 0||e.workDoneToken===void 0)return new Rn;let n=e.workDoneToken;return delete e.workDoneToken,new Qe(t,n)}ht.attachWorkDone=Md;var xd=t=>class extends t{constructor(){super(),this._progressSupported=!1}initialize(e){super.initialize(e),e?.window?.workDoneProgress===!0&&(this._progressSupported=!0,this.connection.onNotification(ft.WorkDoneProgressCancelNotification.type,n=>{let r=Qe.Instances.get(n.token);(r instanceof Jn||r instanceof Gn)&&r.cancel()}))}attachWorkDoneProgress(e){return e===void 0?new Rn:new Qe(this.connection,e)}createWorkDoneProgress(){if(this._progressSupported){let e=(0,Fd.generateUuid)();return this.connection.sendRequest(ft.WorkDoneProgressCreateRequest.type,{token:e}).then(()=>new Jn(this.connection,e))}else return Promise.resolve(new Gn)}};ht.ProgressFeature=xd;var so;(function(t){t.type=new ft.ProgressType})(so||(so={}));var ao=class{constructor(e,n){this._connection=e,this._token=n}report(e){this._connection.sendProgress(so.type,this._token,e)}};function Ld(t,e){if(e===void 0||e.partialResultToken===void 0)return;let n=e.partialResultToken;return delete e.partialResultToken,new ao(t,n)}ht.attachPartialResult=Ld});var ea=T(Kn=>{"use strict";Object.defineProperty(Kn,"__esModule",{value:!0});Kn.ConfigurationFeature=void 0;var Id=pe(),Wd=On(),Ad=t=>class extends t{getConfiguration(e){return e?Wd.string(e)?this._getConfiguration({section:e}):this._getConfiguration(e):this._getConfiguration({})}_getConfiguration(e){let n={items:Array.isArray(e)?e:[e]};return this.connection.sendRequest(Id.ConfigurationRequest.type,n).then(r=>Array.isArray(r)?Array.isArray(e)?r:r[0]:Array.isArray(e)?[]:null)}};Kn.ConfigurationFeature=Ad});var ta=T(Qn=>{"use strict";Object.defineProperty(Qn,"__esModule",{value:!0});Qn.WorkspaceFoldersFeature=void 0;var Xn=pe(),Hd=t=>class extends t{constructor(){super(),this._notificationIsAutoRegistered=!1}initialize(e){super.initialize(e);let n=e.workspace;n&&n.workspaceFolders&&(this._onDidChangeWorkspaceFolders=new Xn.Emitter,this.connection.onNotification(Xn.DidChangeWorkspaceFoldersNotification.type,r=>{this._onDidChangeWorkspaceFolders.fire(r.event)}))}fillServerCapabilities(e){super.fillServerCapabilities(e);let n=e.workspace?.workspaceFolders?.changeNotifications;this._notificationIsAutoRegistered=n===!0||typeof n=="string"}getWorkspaceFolders(){return this.connection.sendRequest(Xn.WorkspaceFoldersRequest.type)}get onDidChangeWorkspaceFolders(){if(!this._onDidChangeWorkspaceFolders)throw new Error("Client doesn't support sending workspace folder change events.");return!this._notificationIsAutoRegistered&&!this._unregistration&&(this._unregistration=this.connection.client.register(Xn.DidChangeWorkspaceFoldersNotification.type)),this._onDidChangeWorkspaceFolders.event}};Qn.WorkspaceFoldersFeature=Hd});var na=T(Yn=>{"use strict";Object.defineProperty(Yn,"__esModule",{value:!0});Yn.CallHierarchyFeature=void 0;var co=pe(),zd=t=>class extends t{get callHierarchy(){return{onPrepare:e=>this.connection.onRequest(co.CallHierarchyPrepareRequest.type,(n,r)=>e(n,r,this.attachWorkDoneProgress(n),void 0)),onIncomingCalls:e=>{let n=co.CallHierarchyIncomingCallsRequest.type;return this.connection.onRequest(n,(r,i)=>e(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))},onOutgoingCalls:e=>{let n=co.CallHierarchyOutgoingCallsRequest.type;return this.connection.onRequest(n,(r,i)=>e(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))}}}};Yn.CallHierarchyFeature=zd});var lo=T(gt=>{"use strict";Object.defineProperty(gt,"__esModule",{value:!0});gt.SemanticTokensBuilder=gt.SemanticTokensDiff=gt.SemanticTokensFeature=void 0;var Zn=pe(),$d=t=>class extends t{get semanticTokens(){return{refresh:()=>this.connection.sendRequest(Zn.SemanticTokensRefreshRequest.type),on:e=>{let n=Zn.SemanticTokensRequest.type;return this.connection.onRequest(n,(r,i)=>e(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))},onDelta:e=>{let n=Zn.SemanticTokensDeltaRequest.type;return this.connection.onRequest(n,(r,i)=>e(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))},onRange:e=>{let n=Zn.SemanticTokensRangeRequest.type;return this.connection.onRequest(n,(r,i)=>e(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))}}}};gt.SemanticTokensFeature=$d;var er=class{constructor(e,n){this.originalSequence=e,this.modifiedSequence=n}computeDiff(){let e=this.originalSequence.length,n=this.modifiedSequence.length,r=0;for(;r<n&&r<e&&this.originalSequence[r]===this.modifiedSequence[r];)r++;if(r<n&&r<e){let i=e-1,d=n-1;for(;i>=r&&d>=r&&this.originalSequence[i]===this.modifiedSequence[d];)i--,d--;(i<r||d<r)&&(i++,d++);let y=i-r+1,_=this.modifiedSequence.slice(r,d+1);return _.length===1&&_[0]===this.originalSequence[i]?[{start:r,deleteCount:y-1}]:[{start:r,deleteCount:y,data:_}]}else return r<n?[{start:r,deleteCount:0,data:this.modifiedSequence.slice(r)}]:r<e?[{start:r,deleteCount:e-r}]:[]}};gt.SemanticTokensDiff=er;var uo=class{constructor(){this._prevData=void 0,this.initialize()}initialize(){this._id=Date.now(),this._prevLine=0,this._prevChar=0,this._data=[],this._dataLen=0}push(e,n,r,i,d){let y=e,_=n;this._dataLen>0&&(y-=this._prevLine,y===0&&(_-=this._prevChar)),this._data[this._dataLen++]=y,this._data[this._dataLen++]=_,this._data[this._dataLen++]=r,this._data[this._dataLen++]=i,this._data[this._dataLen++]=d,this._prevLine=e,this._prevChar=n}get id(){return this._id.toString()}previousResult(e){this.id===e&&(this._prevData=this._data),this.initialize()}build(){return this._prevData=void 0,{resultId:this.id,data:this._data}}canBuildEdits(){return this._prevData!==void 0}buildEdits(){return this._prevData!==void 0?{resultId:this.id,edits:new er(this._prevData,this._data).computeDiff()}:this.build()}};gt.SemanticTokensBuilder=uo});var ra=T(tr=>{"use strict";Object.defineProperty(tr,"__esModule",{value:!0});tr.ShowDocumentFeature=void 0;var Bd=pe(),Ud=t=>class extends t{showDocument(e){return this.connection.sendRequest(Bd.ShowDocumentRequest.type,e)}};tr.ShowDocumentFeature=Ud});var ia=T(nr=>{"use strict";Object.defineProperty(nr,"__esModule",{value:!0});nr.FileOperationsFeature=void 0;var Vt=pe(),Vd=t=>class extends t{onDidCreateFiles(e){return this.connection.onNotification(Vt.DidCreateFilesNotification.type,n=>{e(n)})}onDidRenameFiles(e){return this.connection.onNotification(Vt.DidRenameFilesNotification.type,n=>{e(n)})}onDidDeleteFiles(e){return this.connection.onNotification(Vt.DidDeleteFilesNotification.type,n=>{e(n)})}onWillCreateFiles(e){return this.connection.onRequest(Vt.WillCreateFilesRequest.type,(n,r)=>e(n,r))}onWillRenameFiles(e){return this.connection.onRequest(Vt.WillRenameFilesRequest.type,(n,r)=>e(n,r))}onWillDeleteFiles(e){return this.connection.onRequest(Vt.WillDeleteFilesRequest.type,(n,r)=>e(n,r))}};nr.FileOperationsFeature=Vd});var oa=T(rr=>{"use strict";Object.defineProperty(rr,"__esModule",{value:!0});rr.LinkedEditingRangeFeature=void 0;var Jd=pe(),Gd=t=>class extends t{onLinkedEditingRange(e){return this.connection.onRequest(Jd.LinkedEditingRangeRequest.type,(n,r)=>e(n,r,this.attachWorkDoneProgress(n),void 0))}};rr.LinkedEditingRangeFeature=Gd});var sa=T(ir=>{"use strict";Object.defineProperty(ir,"__esModule",{value:!0});ir.TypeHierarchyFeature=void 0;var fo=pe(),Kd=t=>class extends t{get typeHierarchy(){return{onPrepare:e=>this.connection.onRequest(fo.TypeHierarchyPrepareRequest.type,(n,r)=>e(n,r,this.attachWorkDoneProgress(n),void 0)),onSupertypes:e=>{let n=fo.TypeHierarchySupertypesRequest.type;return this.connection.onRequest(n,(r,i)=>e(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))},onSubtypes:e=>{let n=fo.TypeHierarchySubtypesRequest.type;return this.connection.onRequest(n,(r,i)=>e(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))}}}};ir.TypeHierarchyFeature=Kd});var ca=T(or=>{"use strict";Object.defineProperty(or,"__esModule",{value:!0});or.InlineValueFeature=void 0;var aa=pe(),Xd=t=>class extends t{get inlineValue(){return{refresh:()=>this.connection.sendRequest(aa.InlineValueRefreshRequest.type),on:e=>this.connection.onRequest(aa.InlineValueRequest.type,(n,r)=>e(n,r,this.attachWorkDoneProgress(n)))}}};or.InlineValueFeature=Xd});var ua=T(sr=>{"use strict";Object.defineProperty(sr,"__esModule",{value:!0});sr.InlayHintFeature=void 0;var ho=pe(),Qd=t=>class extends t{get inlayHint(){return{refresh:()=>this.connection.sendRequest(ho.InlayHintRefreshRequest.type),on:e=>this.connection.onRequest(ho.InlayHintRequest.type,(n,r)=>e(n,r,this.attachWorkDoneProgress(n))),resolve:e=>this.connection.onRequest(ho.InlayHintResolveRequest.type,(n,r)=>e(n,r))}}};sr.InlayHintFeature=Qd});var la=T(ar=>{"use strict";Object.defineProperty(ar,"__esModule",{value:!0});ar.DiagnosticFeature=void 0;var _n=pe(),Yd=t=>class extends t{get diagnostics(){return{refresh:()=>this.connection.sendRequest(_n.DiagnosticRefreshRequest.type),on:e=>this.connection.onRequest(_n.DocumentDiagnosticRequest.type,(n,r)=>e(n,r,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(_n.DocumentDiagnosticRequest.partialResult,n))),onWorkspace:e=>this.connection.onRequest(_n.WorkspaceDiagnosticRequest.type,(n,r)=>e(n,r,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(_n.WorkspaceDiagnosticRequest.partialResult,n)))}}};ar.DiagnosticFeature=Yd});var mo=T(cr=>{"use strict";Object.defineProperty(cr,"__esModule",{value:!0});cr.TextDocuments=void 0;var Tt=pe(),go=class{constructor(e){this._configuration=e,this._syncedDocuments=new Map,this._onDidChangeContent=new Tt.Emitter,this._onDidOpen=new Tt.Emitter,this._onDidClose=new Tt.Emitter,this._onDidSave=new Tt.Emitter,this._onWillSave=new Tt.Emitter}get onDidOpen(){return this._onDidOpen.event}get onDidChangeContent(){return this._onDidChangeContent.event}get onWillSave(){return this._onWillSave.event}onWillSaveWaitUntil(e){this._willSaveWaitUntil=e}get onDidSave(){return this._onDidSave.event}get onDidClose(){return this._onDidClose.event}get(e){return this._syncedDocuments.get(e)}all(){return Array.from(this._syncedDocuments.values())}keys(){return Array.from(this._syncedDocuments.keys())}listen(e){e.__textDocumentSync=Tt.TextDocumentSyncKind.Incremental;let n=[];return n.push(e.onDidOpenTextDocument(r=>{let i=r.textDocument,d=this._configuration.create(i.uri,i.languageId,i.version,i.text);this._syncedDocuments.set(i.uri,d);let y=Object.freeze({document:d});this._onDidOpen.fire(y),this._onDidChangeContent.fire(y)})),n.push(e.onDidChangeTextDocument(r=>{let i=r.textDocument,d=r.contentChanges;if(d.length===0)return;let{version:y}=i;if(y==null)throw new Error(`Received document change event for ${i.uri} without valid version identifier`);let _=this._syncedDocuments.get(i.uri);_!==void 0&&(_=this._configuration.update(_,d,y),this._syncedDocuments.set(i.uri,_),this._onDidChangeContent.fire(Object.freeze({document:_})))})),n.push(e.onDidCloseTextDocument(r=>{let i=this._syncedDocuments.get(r.textDocument.uri);i!==void 0&&(this._syncedDocuments.delete(r.textDocument.uri),this._onDidClose.fire(Object.freeze({document:i})))})),n.push(e.onWillSaveTextDocument(r=>{let i=this._syncedDocuments.get(r.textDocument.uri);i!==void 0&&this._onWillSave.fire(Object.freeze({document:i,reason:r.reason}))})),n.push(e.onWillSaveTextDocumentWaitUntil((r,i)=>{let d=this._syncedDocuments.get(r.textDocument.uri);return d!==void 0&&this._willSaveWaitUntil?this._willSaveWaitUntil(Object.freeze({document:d,reason:r.reason}),i):[]})),n.push(e.onDidSaveTextDocument(r=>{let i=this._syncedDocuments.get(r.textDocument.uri);i!==void 0&&this._onDidSave.fire(Object.freeze({document:i}))})),Tt.Disposable.create(()=>{n.forEach(r=>r.dispose())})}};cr.TextDocuments=go});var yo=T(Jt=>{"use strict";Object.defineProperty(Jt,"__esModule",{value:!0});Jt.NotebookDocuments=Jt.NotebookSyncFeature=void 0;var je=pe(),da=mo(),Zd=t=>class extends t{get synchronization(){return{onDidOpenNotebookDocument:e=>this.connection.onNotification(je.DidOpenNotebookDocumentNotification.type,n=>{e(n)}),onDidChangeNotebookDocument:e=>this.connection.onNotification(je.DidChangeNotebookDocumentNotification.type,n=>{e(n)}),onDidSaveNotebookDocument:e=>this.connection.onNotification(je.DidSaveNotebookDocumentNotification.type,n=>{e(n)}),onDidCloseNotebookDocument:e=>this.connection.onNotification(je.DidCloseNotebookDocumentNotification.type,n=>{e(n)})}}};Jt.NotebookSyncFeature=Zd;var mt=class{onDidOpenTextDocument(e){return this.openHandler=e,je.Disposable.create(()=>{this.openHandler=void 0})}openTextDocument(e){this.openHandler&&this.openHandler(e)}onDidChangeTextDocument(e){return this.changeHandler=e,je.Disposable.create(()=>{this.changeHandler=e})}changeTextDocument(e){this.changeHandler&&this.changeHandler(e)}onDidCloseTextDocument(e){return this.closeHandler=e,je.Disposable.create(()=>{this.closeHandler=void 0})}closeTextDocument(e){this.closeHandler&&this.closeHandler(e)}onWillSaveTextDocument(){return mt.NULL_DISPOSE}onWillSaveTextDocumentWaitUntil(){return mt.NULL_DISPOSE}onDidSaveTextDocument(){return mt.NULL_DISPOSE}};mt.NULL_DISPOSE=Object.freeze({dispose:()=>{}});var po=class{constructor(e){e instanceof da.TextDocuments?this._cellTextDocuments=e:this._cellTextDocuments=new da.TextDocuments(e),this.notebookDocuments=new Map,this.notebookCellMap=new Map,this._onDidOpen=new je.Emitter,this._onDidChange=new je.Emitter,this._onDidSave=new je.Emitter,this._onDidClose=new je.Emitter}get cellTextDocuments(){return this._cellTextDocuments}getCellTextDocument(e){return this._cellTextDocuments.get(e.document)}getNotebookDocument(e){return this.notebookDocuments.get(e)}getNotebookCell(e){let n=this.notebookCellMap.get(e);return n&&n[0]}findNotebookDocumentForCell(e){let n=typeof e=="string"?e:e.document,r=this.notebookCellMap.get(n);return r&&r[1]}get onDidOpen(){return this._onDidOpen.event}get onDidSave(){return this._onDidSave.event}get onDidChange(){return this._onDidChange.event}get onDidClose(){return this._onDidClose.event}listen(e){let n=new mt,r=[];return r.push(this.cellTextDocuments.listen(n)),r.push(e.notebooks.synchronization.onDidOpenNotebookDocument(i=>{this.notebookDocuments.set(i.notebookDocument.uri,i.notebookDocument);for(let d of i.cellTextDocuments)n.openTextDocument({textDocument:d});this.updateCellMap(i.notebookDocument),this._onDidOpen.fire(i.notebookDocument)})),r.push(e.notebooks.synchronization.onDidChangeNotebookDocument(i=>{let d=this.notebookDocuments.get(i.notebookDocument.uri);if(d===void 0)return;d.version=i.notebookDocument.version;let y=d.metadata,_=!1,P=i.change;P.metadata!==void 0&&(_=!0,d.metadata=P.metadata);let D=[],w=[],N=[],S=[];if(P.cells!==void 0){let M=P.cells;if(M.structure!==void 0){let p=M.structure.array;if(d.cells.splice(p.start,p.deleteCount,...p.cells!==void 0?p.cells:[]),M.structure.didOpen!==void 0)for(let h of M.structure.didOpen)n.openTextDocument({textDocument:h}),D.push(h.uri);if(M.structure.didClose)for(let h of M.structure.didClose)n.closeTextDocument({textDocument:h}),w.push(h.uri)}if(M.data!==void 0){let p=new Map(M.data.map(h=>[h.document,h]));for(let h=0;h<=d.cells.length;h++){let q=p.get(d.cells[h].document);if(q!==void 0){let x=d.cells.splice(h,1,q);if(N.push({old:x[0],new:q}),p.delete(q.document),p.size===0)break}}}if(M.textContent!==void 0)for(let p of M.textContent)n.changeTextDocument({textDocument:p.document,contentChanges:p.changes}),S.push(p.document.uri)}this.updateCellMap(d);let H={notebookDocument:d};_&&(H.metadata={old:y,new:d.metadata});let U=[];for(let M of D)U.push(this.getNotebookCell(M));let z=[];for(let M of w)z.push(this.getNotebookCell(M));let X=[];for(let M of S)X.push(this.getNotebookCell(M));(U.length>0||z.length>0||N.length>0||X.length>0)&&(H.cells={added:U,removed:z,changed:{data:N,textContent:X}}),(H.metadata!==void 0||H.cells!==void 0)&&this._onDidChange.fire(H)})),r.push(e.notebooks.synchronization.onDidSaveNotebookDocument(i=>{let d=this.notebookDocuments.get(i.notebookDocument.uri);d!==void 0&&this._onDidSave.fire(d)})),r.push(e.notebooks.synchronization.onDidCloseNotebookDocument(i=>{let d=this.notebookDocuments.get(i.notebookDocument.uri);if(d!==void 0){this._onDidClose.fire(d);for(let y of i.cellTextDocuments)n.closeTextDocument({textDocument:y});this.notebookDocuments.delete(i.notebookDocument.uri);for(let y of d.cells)this.notebookCellMap.delete(y.document)}})),je.Disposable.create(()=>{r.forEach(i=>i.dispose())})}updateCellMap(e){for(let n of e.cells)this.notebookCellMap.set(n.document,[n,e])}};Jt.NotebookDocuments=po});var fa=T(ur=>{"use strict";Object.defineProperty(ur,"__esModule",{value:!0});ur.MonikerFeature=void 0;var ef=pe(),tf=t=>class extends t{get moniker(){return{on:e=>{let n=ef.MonikerRequest.type;return this.connection.onRequest(n,(r,i)=>e(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))}}}};ur.MonikerFeature=tf});var qo=T(V=>{"use strict";Object.defineProperty(V,"__esModule",{value:!0});V.createConnection=V.combineFeatures=V.combineNotebooksFeatures=V.combineLanguagesFeatures=V.combineWorkspaceFeatures=V.combineWindowFeatures=V.combineClientFeatures=V.combineTracerFeatures=V.combineTelemetryFeatures=V.combineConsoleFeatures=V._NotebooksImpl=V._LanguagesImpl=V.BulkUnregistration=V.BulkRegistration=V.ErrorMessageTracker=void 0;var C=pe(),Fe=On(),vo=oo(),L=Zs(),nf=ea(),rf=ta(),of=na(),sf=lo(),af=ra(),cf=ia(),uf=oa(),lf=sa(),df=ca(),ff=ua(),hf=la(),gf=yo(),mf=fa();function bo(t){if(t!==null)return t}var Ro=class{constructor(){this._messages=Object.create(null)}add(e){let n=this._messages[e];n||(n=0),n++,this._messages[e]=n}sendErrors(e){Object.keys(this._messages).forEach(n=>{e.window.showErrorMessage(n)})}};V.ErrorMessageTracker=Ro;var lr=class{constructor(){}rawAttach(e){this._rawConnection=e}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}fillServerCapabilities(e){}initialize(e){}error(e){this.send(C.MessageType.Error,e)}warn(e){this.send(C.MessageType.Warning,e)}info(e){this.send(C.MessageType.Info,e)}log(e){this.send(C.MessageType.Log,e)}send(e,n){this._rawConnection&&this._rawConnection.sendNotification(C.LogMessageNotification.type,{type:e,message:n}).catch(()=>{(0,C.RAL)().console.error("Sending log message failed")})}},_o=class{constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}showErrorMessage(e,...n){let r={type:C.MessageType.Error,message:e,actions:n};return this.connection.sendRequest(C.ShowMessageRequest.type,r).then(bo)}showWarningMessage(e,...n){let r={type:C.MessageType.Warning,message:e,actions:n};return this.connection.sendRequest(C.ShowMessageRequest.type,r).then(bo)}showInformationMessage(e,...n){let r={type:C.MessageType.Info,message:e,actions:n};return this.connection.sendRequest(C.ShowMessageRequest.type,r).then(bo)}},ha=(0,af.ShowDocumentFeature)((0,L.ProgressFeature)(_o)),pf;(function(t){function e(){return new dr}t.create=e})(pf=V.BulkRegistration||(V.BulkRegistration={}));var dr=class{constructor(){this._registrations=[],this._registered=new Set}add(e,n){let r=Fe.string(e)?e:e.method;if(this._registered.has(r))throw new Error(`${r} is already added to this registration`);let i=vo.generateUuid();this._registrations.push({id:i,method:r,registerOptions:n||{}}),this._registered.add(r)}asRegistrationParams(){return{registrations:this._registrations}}},yf;(function(t){function e(){return new Dn(void 0,[])}t.create=e})(yf=V.BulkUnregistration||(V.BulkUnregistration={}));var Dn=class{constructor(e,n){this._connection=e,this._unregistrations=new Map,n.forEach(r=>{this._unregistrations.set(r.method,r)})}get isAttached(){return!!this._connection}attach(e){this._connection=e}add(e){this._unregistrations.set(e.method,e)}dispose(){let e=[];for(let r of this._unregistrations.values())e.push(r);let n={unregisterations:e};this._connection.sendRequest(C.UnregistrationRequest.type,n).catch(()=>{this._connection.console.info("Bulk unregistration failed.")})}disposeSingle(e){let n=Fe.string(e)?e:e.method,r=this._unregistrations.get(n);if(!r)return!1;let i={unregisterations:[r]};return this._connection.sendRequest(C.UnregistrationRequest.type,i).then(()=>{this._unregistrations.delete(n)},d=>{this._connection.console.info(`Un-registering request handler for ${r.id} failed.`)}),!0}},fr=class{attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}register(e,n,r){return e instanceof dr?this.registerMany(e):e instanceof Dn?this.registerSingle1(e,n,r):this.registerSingle2(e,n)}registerSingle1(e,n,r){let i=Fe.string(n)?n:n.method,d=vo.generateUuid(),y={registrations:[{id:d,method:i,registerOptions:r||{}}]};return e.isAttached||e.attach(this.connection),this.connection.sendRequest(C.RegistrationRequest.type,y).then(_=>(e.add({id:d,method:i}),e),_=>(this.connection.console.info(`Registering request handler for ${i} failed.`),Promise.reject(_)))}registerSingle2(e,n){let r=Fe.string(e)?e:e.method,i=vo.generateUuid(),d={registrations:[{id:i,method:r,registerOptions:n||{}}]};return this.connection.sendRequest(C.RegistrationRequest.type,d).then(y=>C.Disposable.create(()=>{this.unregisterSingle(i,r).catch(()=>{this.connection.console.info(`Un-registering capability with id ${i} failed.`)})}),y=>(this.connection.console.info(`Registering request handler for ${r} failed.`),Promise.reject(y)))}unregisterSingle(e,n){let r={unregisterations:[{id:e,method:n}]};return this.connection.sendRequest(C.UnregistrationRequest.type,r).catch(()=>{this.connection.console.info(`Un-registering request handler for ${e} failed.`)})}registerMany(e){let n=e.asRegistrationParams();return this.connection.sendRequest(C.RegistrationRequest.type,n).then(()=>new Dn(this._connection,n.registrations.map(r=>({id:r.id,method:r.method}))),r=>(this.connection.console.info("Bulk registration failed."),Promise.reject(r)))}},Do=class{constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}applyEdit(e){function n(i){return i&&!!i.edit}let r=n(e)?e:{edit:e};return this.connection.sendRequest(C.ApplyWorkspaceEditRequest.type,r)}},ga=(0,cf.FileOperationsFeature)((0,rf.WorkspaceFoldersFeature)((0,nf.ConfigurationFeature)(Do))),hr=class{constructor(){this._trace=C.Trace.Off}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}set trace(e){this._trace=e}log(e,n){this._trace!==C.Trace.Off&&this.connection.sendNotification(C.LogTraceNotification.type,{message:e,verbose:this._trace===C.Trace.Verbose?n:void 0}).catch(()=>{})}},gr=class{constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}logEvent(e){this.connection.sendNotification(C.TelemetryEventNotification.type,e).catch(()=>{this.connection.console.log("Sending TelemetryEventNotification failed")})}},mr=class{constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}attachWorkDoneProgress(e){return(0,L.attachWorkDone)(this.connection,e)}attachPartialResultProgress(e,n){return(0,L.attachPartialResult)(this.connection,n)}};V._LanguagesImpl=mr;var ma=(0,mf.MonikerFeature)((0,hf.DiagnosticFeature)((0,ff.InlayHintFeature)((0,df.InlineValueFeature)((0,lf.TypeHierarchyFeature)((0,uf.LinkedEditingRangeFeature)((0,sf.SemanticTokensFeature)((0,of.CallHierarchyFeature)(mr)))))))),pr=class{constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}attachWorkDoneProgress(e){return(0,L.attachWorkDone)(this.connection,e)}attachPartialResultProgress(e,n){return(0,L.attachPartialResult)(this.connection,n)}};V._NotebooksImpl=pr;var pa=(0,gf.NotebookSyncFeature)(pr);function ya(t,e){return function(n){return e(t(n))}}V.combineConsoleFeatures=ya;function ba(t,e){return function(n){return e(t(n))}}V.combineTelemetryFeatures=ba;function va(t,e){return function(n){return e(t(n))}}V.combineTracerFeatures=va;function Ra(t,e){return function(n){return e(t(n))}}V.combineClientFeatures=Ra;function _a(t,e){return function(n){return e(t(n))}}V.combineWindowFeatures=_a;function Da(t,e){return function(n){return e(t(n))}}V.combineWorkspaceFeatures=Da;function qa(t,e){return function(n){return e(t(n))}}V.combineLanguagesFeatures=qa;function wa(t,e){return function(n){return e(t(n))}}V.combineNotebooksFeatures=wa;function bf(t,e){function n(i,d,y){return i&&d?y(i,d):i||d}return{__brand:"features",console:n(t.console,e.console,ya),tracer:n(t.tracer,e.tracer,va),telemetry:n(t.telemetry,e.telemetry,ba),client:n(t.client,e.client,Ra),window:n(t.window,e.window,_a),workspace:n(t.workspace,e.workspace,Da),languages:n(t.languages,e.languages,qa),notebooks:n(t.notebooks,e.notebooks,wa)}}V.combineFeatures=bf;function vf(t,e,n){let r=n&&n.console?new(n.console(lr)):new lr,i=t(r);r.rawAttach(i);let d=n&&n.tracer?new(n.tracer(hr)):new hr,y=n&&n.telemetry?new(n.telemetry(gr)):new gr,_=n&&n.client?new(n.client(fr)):new fr,P=n&&n.window?new(n.window(ha)):new ha,D=n&&n.workspace?new(n.workspace(ga)):new ga,w=n&&n.languages?new(n.languages(ma)):new ma,N=n&&n.notebooks?new(n.notebooks(pa)):new pa,S=[r,d,y,_,P,D,w,N];function H(p){return p instanceof Promise?p:Fe.thenable(p)?new Promise((h,q)=>{p.then(x=>h(x),x=>q(x))}):Promise.resolve(p)}let U,z,X,M={listen:()=>i.listen(),sendRequest:(p,...h)=>i.sendRequest(Fe.string(p)?p:p.method,...h),onRequest:(p,h)=>i.onRequest(p,h),sendNotification:(p,h)=>{let q=Fe.string(p)?p:p.method;return arguments.length===1?i.sendNotification(q):i.sendNotification(q,h)},onNotification:(p,h)=>i.onNotification(p,h),onProgress:i.onProgress,sendProgress:i.sendProgress,onInitialize:p=>(z=p,{dispose:()=>{z=void 0}}),onInitialized:p=>i.onNotification(C.InitializedNotification.type,p),onShutdown:p=>(U=p,{dispose:()=>{U=void 0}}),onExit:p=>(X=p,{dispose:()=>{X=void 0}}),get console(){return r},get telemetry(){return y},get tracer(){return d},get client(){return _},get window(){return P},get workspace(){return D},get languages(){return w},get notebooks(){return N},onDidChangeConfiguration:p=>i.onNotification(C.DidChangeConfigurationNotification.type,p),onDidChangeWatchedFiles:p=>i.onNotification(C.DidChangeWatchedFilesNotification.type,p),__textDocumentSync:void 0,onDidOpenTextDocument:p=>i.onNotification(C.DidOpenTextDocumentNotification.type,p),onDidChangeTextDocument:p=>i.onNotification(C.DidChangeTextDocumentNotification.type,p),onDidCloseTextDocument:p=>i.onNotification(C.DidCloseTextDocumentNotification.type,p),onWillSaveTextDocument:p=>i.onNotification(C.WillSaveTextDocumentNotification.type,p),onWillSaveTextDocumentWaitUntil:p=>i.onRequest(C.WillSaveTextDocumentWaitUntilRequest.type,p),onDidSaveTextDocument:p=>i.onNotification(C.DidSaveTextDocumentNotification.type,p),sendDiagnostics:p=>i.sendNotification(C.PublishDiagnosticsNotification.type,p),onHover:p=>i.onRequest(C.HoverRequest.type,(h,q)=>p(h,q,(0,L.attachWorkDone)(i,h),void 0)),onCompletion:p=>i.onRequest(C.CompletionRequest.type,(h,q)=>p(h,q,(0,L.attachWorkDone)(i,h),(0,L.attachPartialResult)(i,h))),onCompletionResolve:p=>i.onRequest(C.CompletionResolveRequest.type,p),onSignatureHelp:p=>i.onRequest(C.SignatureHelpRequest.type,(h,q)=>p(h,q,(0,L.attachWorkDone)(i,h),void 0)),onDeclaration:p=>i.onRequest(C.DeclarationRequest.type,(h,q)=>p(h,q,(0,L.attachWorkDone)(i,h),(0,L.attachPartialResult)(i,h))),onDefinition:p=>i.onRequest(C.DefinitionRequest.type,(h,q)=>p(h,q,(0,L.attachWorkDone)(i,h),(0,L.attachPartialResult)(i,h))),onTypeDefinition:p=>i.onRequest(C.TypeDefinitionRequest.type,(h,q)=>p(h,q,(0,L.attachWorkDone)(i,h),(0,L.attachPartialResult)(i,h))),onImplementation:p=>i.onRequest(C.ImplementationRequest.type,(h,q)=>p(h,q,(0,L.attachWorkDone)(i,h),(0,L.attachPartialResult)(i,h))),onReferences:p=>i.onRequest(C.ReferencesRequest.type,(h,q)=>p(h,q,(0,L.attachWorkDone)(i,h),(0,L.attachPartialResult)(i,h))),onDocumentHighlight:p=>i.onRequest(C.DocumentHighlightRequest.type,(h,q)=>p(h,q,(0,L.attachWorkDone)(i,h),(0,L.attachPartialResult)(i,h))),onDocumentSymbol:p=>i.onRequest(C.DocumentSymbolRequest.type,(h,q)=>p(h,q,(0,L.attachWorkDone)(i,h),(0,L.attachPartialResult)(i,h))),onWorkspaceSymbol:p=>i.onRequest(C.WorkspaceSymbolRequest.type,(h,q)=>p(h,q,(0,L.attachWorkDone)(i,h),(0,L.attachPartialResult)(i,h))),onWorkspaceSymbolResolve:p=>i.onRequest(C.WorkspaceSymbolResolveRequest.type,p),onCodeAction:p=>i.onRequest(C.CodeActionRequest.type,(h,q)=>p(h,q,(0,L.attachWorkDone)(i,h),(0,L.attachPartialResult)(i,h))),onCodeActionResolve:p=>i.onRequest(C.CodeActionResolveRequest.type,(h,q)=>p(h,q)),onCodeLens:p=>i.onRequest(C.CodeLensRequest.type,(h,q)=>p(h,q,(0,L.attachWorkDone)(i,h),(0,L.attachPartialResult)(i,h))),onCodeLensResolve:p=>i.onRequest(C.CodeLensResolveRequest.type,(h,q)=>p(h,q)),onDocumentFormatting:p=>i.onRequest(C.DocumentFormattingRequest.type,(h,q)=>p(h,q,(0,L.attachWorkDone)(i,h),void 0)),onDocumentRangeFormatting:p=>i.onRequest(C.DocumentRangeFormattingRequest.type,(h,q)=>p(h,q,(0,L.attachWorkDone)(i,h),void 0)),onDocumentOnTypeFormatting:p=>i.onRequest(C.DocumentOnTypeFormattingRequest.type,(h,q)=>p(h,q)),onRenameRequest:p=>i.onRequest(C.RenameRequest.type,(h,q)=>p(h,q,(0,L.attachWorkDone)(i,h),void 0)),onPrepareRename:p=>i.onRequest(C.PrepareRenameRequest.type,(h,q)=>p(h,q)),onDocumentLinks:p=>i.onRequest(C.DocumentLinkRequest.type,(h,q)=>p(h,q,(0,L.attachWorkDone)(i,h),(0,L.attachPartialResult)(i,h))),onDocumentLinkResolve:p=>i.onRequest(C.DocumentLinkResolveRequest.type,(h,q)=>p(h,q)),onDocumentColor:p=>i.onRequest(C.DocumentColorRequest.type,(h,q)=>p(h,q,(0,L.attachWorkDone)(i,h),(0,L.attachPartialResult)(i,h))),onColorPresentation:p=>i.onRequest(C.ColorPresentationRequest.type,(h,q)=>p(h,q,(0,L.attachWorkDone)(i,h),(0,L.attachPartialResult)(i,h))),onFoldingRanges:p=>i.onRequest(C.FoldingRangeRequest.type,(h,q)=>p(h,q,(0,L.attachWorkDone)(i,h),(0,L.attachPartialResult)(i,h))),onSelectionRanges:p=>i.onRequest(C.SelectionRangeRequest.type,(h,q)=>p(h,q,(0,L.attachWorkDone)(i,h),(0,L.attachPartialResult)(i,h))),onExecuteCommand:p=>i.onRequest(C.ExecuteCommandRequest.type,(h,q)=>p(h,q,(0,L.attachWorkDone)(i,h),void 0)),dispose:()=>i.dispose()};for(let p of S)p.attach(M);return i.onRequest(C.InitializeRequest.type,p=>{e.initialize(p),Fe.string(p.trace)&&(d.trace=C.Trace.fromString(p.trace));for(let h of S)h.initialize(p.capabilities);if(z){let h=z(p,new C.CancellationTokenSource().token,(0,L.attachWorkDone)(i,p),void 0);return H(h).then(q=>{if(q instanceof C.ResponseError)return q;let x=q;x||(x={capabilities:{}});let re=x.capabilities;re||(re={},x.capabilities=re),re.textDocumentSync===void 0||re.textDocumentSync===null?re.textDocumentSync=Fe.number(M.__textDocumentSync)?M.__textDocumentSync:C.TextDocumentSyncKind.None:!Fe.number(re.textDocumentSync)&&!Fe.number(re.textDocumentSync.change)&&(re.textDocumentSync.change=Fe.number(M.__textDocumentSync)?M.__textDocumentSync:C.TextDocumentSyncKind.None);for(let ue of S)ue.fillServerCapabilities(re);return x})}else{let h={capabilities:{textDocumentSync:C.TextDocumentSyncKind.None}};for(let q of S)q.fillServerCapabilities(h.capabilities);return h}}),i.onRequest(C.ShutdownRequest.type,()=>{if(e.shutdownReceived=!0,U)return U(new C.CancellationTokenSource().token)}),i.onNotification(C.ExitNotification.type,()=>{try{X&&X()}finally{e.shutdownReceived?e.exit(0):e.exit(1)}}),i.onNotification(C.SetTraceNotification.type,p=>{d.trace=C.Trace.fromString(p.value)}),M}V.createConnection=vf});var ka=T(Ce=>{"use strict";Object.defineProperty(Ce,"__esModule",{value:!0});Ce.resolveModulePath=Ce.FileSystem=Ce.resolveGlobalYarnPath=Ce.resolveGlobalNodePath=Ce.resolve=Ce.uriToFilePath=void 0;var Rf=require("url"),Ue=require("path"),wo=require("fs"),Co=require("child_process");function _f(t){let e=Rf.parse(t);if(e.protocol!=="file:"||!e.path)return;let n=e.path.split("/");for(var r=0,i=n.length;r<i;r++)n[r]=decodeURIComponent(n[r]);if(process.platform==="win32"&&n.length>1){let d=n[0],y=n[1];d.length===0&&y.length>1&&y[1]===":"&&n.shift()}return Ue.normalize(n.join("/"))}Ce.uriToFilePath=_f;function Po(){return process.platform==="win32"}function yr(t,e,n,r){let i="NODE_PATH",d=["var p = process;","p.on('message',function(m){","if(m.c==='e'){","p.exit(0);","}","else if(m.c==='rs'){","try{","var r=require.resolve(m.a);","p.send({c:'r',s:true,r:r});","}","catch(err){","p.send({c:'r',s:false});","}","}","});"].join("");return new Promise((y,_)=>{let P=process.env,D=Object.create(null);Object.keys(P).forEach(w=>D[w]=P[w]),e&&wo.existsSync(e)&&(D[i]?D[i]=e+Ue.delimiter+D[i]:D[i]=e,r&&r(`NODE_PATH value is: ${D[i]}`)),D.ELECTRON_RUN_AS_NODE="1";try{let w=(0,Co.fork)("",[],{cwd:n,env:D,execArgv:["-e",d]});if(w.pid===void 0){_(new Error(`Starting process to resolve node module  ${t} failed`));return}w.on("error",S=>{_(S)}),w.on("message",S=>{S.c==="r"&&(w.send({c:"e"}),S.s?y(S.r):_(new Error(`Failed to resolve module: ${t}`)))});let N={c:"rs",a:t};w.send(N)}catch(w){_(w)}})}Ce.resolve=yr;function ko(t){let e="npm",n=Object.create(null);Object.keys(process.env).forEach(d=>n[d]=process.env[d]),n.NO_UPDATE_NOTIFIER="true";let r={encoding:"utf8",env:n};Po()&&(e="npm.cmd",r.shell=!0);let i=()=>{};try{process.on("SIGPIPE",i);let d=(0,Co.spawnSync)(e,["config","get","prefix"],r).stdout;if(!d){t&&t("'npm config get prefix' didn't return a value.");return}let y=d.trim();return t&&t(`'npm config get prefix' value is: ${y}`),y.length>0?Po()?Ue.join(y,"node_modules"):Ue.join(y,"lib","node_modules"):void 0}catch{return}finally{process.removeListener("SIGPIPE",i)}}Ce.resolveGlobalNodePath=ko;function Df(t){let e="yarn",n={encoding:"utf8"};Po()&&(e="yarn.cmd",n.shell=!0);let r=()=>{};try{process.on("SIGPIPE",r);let i=(0,Co.spawnSync)(e,["global","dir","--json"],n),d=i.stdout;if(!d){t&&(t("'yarn global dir' didn't return a value."),i.stderr&&t(i.stderr));return}let y=d.trim().split(/\r?\n/);for(let _ of y)try{let P=JSON.parse(_);if(P.type==="log")return Ue.join(P.data,"node_modules")}catch{}return}catch{return}finally{process.removeListener("SIGPIPE",r)}}Ce.resolveGlobalYarnPath=Df;var Pa;(function(t){let e;function n(){return e!==void 0||(process.platform==="win32"?e=!1:e=!wo.existsSync(__filename.toUpperCase())||!wo.existsSync(__filename.toLowerCase())),e}t.isCaseSensitive=n;function r(i,d){return n()?Ue.normalize(d).indexOf(Ue.normalize(i))===0:Ue.normalize(d).toLowerCase().indexOf(Ue.normalize(i).toLowerCase())===0}t.isParent=r})(Pa=Ce.FileSystem||(Ce.FileSystem={}));function qf(t,e,n,r){return n?(Ue.isAbsolute(n)||(n=Ue.join(t,n)),yr(e,n,n,r).then(i=>Pa.isParent(n,i)?i:Promise.reject(new Error(`Failed to load ${e} from node path location.`))).then(void 0,i=>yr(e,ko(r),t,r))):yr(e,ko(r),t,r)}Ce.resolveModulePath=qf});var To=T((ag,Ca)=>{"use strict";Ca.exports=pe()});var Sa=T(Re=>{"use strict";var wf=Re&&Re.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),Ta=Re&&Re.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&wf(e,t,n)};Object.defineProperty(Re,"__esModule",{value:!0});Re.ProposedFeatures=Re.NotebookDocuments=Re.TextDocuments=Re.SemanticTokensBuilder=void 0;var Pf=lo();Object.defineProperty(Re,"SemanticTokensBuilder",{enumerable:!0,get:function(){return Pf.SemanticTokensBuilder}});Ta(pe(),Re);var kf=mo();Object.defineProperty(Re,"TextDocuments",{enumerable:!0,get:function(){return kf.TextDocuments}});var Cf=yo();Object.defineProperty(Re,"NotebookDocuments",{enumerable:!0,get:function(){return Cf.NotebookDocuments}});Ta(qo(),Re);var Tf;(function(t){t.all={__brand:"features"}})(Tf=Re.ProposedFeatures||(Re.ProposedFeatures={}))});var ja=T(Te=>{"use strict";var Sf=Te&&Te.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),Oa=Te&&Te.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&Sf(e,t,n)};Object.defineProperty(Te,"__esModule",{value:!0});Te.createConnection=Te.Files=void 0;var So=On(),Nf=qo(),qn=ka(),St=To();Oa(To(),Te);Oa(Sa(),Te);var Of;(function(t){t.uriToFilePath=qn.uriToFilePath,t.resolveGlobalNodePath=qn.resolveGlobalNodePath,t.resolveGlobalYarnPath=qn.resolveGlobalYarnPath,t.resolve=qn.resolve,t.resolveModulePath=qn.resolveModulePath})(Of=Te.Files||(Te.Files={}));var Na;function br(){if(Na!==void 0)try{Na.end()}catch{}}var Gt=!1,Ea;function Ef(){let t="--clientProcessId";function e(n){try{let r=parseInt(n);isNaN(r)||(Ea=setInterval(()=>{try{process.kill(r,0)}catch{br(),process.exit(Gt?0:1)}},3e3))}catch{}}for(let n=2;n<process.argv.length;n++){let r=process.argv[n];if(r===t&&n+1<process.argv.length){e(process.argv[n+1]);return}else{let i=r.split("=");i[0]===t&&e(i[1])}}}Ef();var jf={initialize:t=>{let e=t.processId;So.number(e)&&Ea===void 0&&setInterval(()=>{try{process.kill(e,0)}catch{process.exit(Gt?0:1)}},3e3)},get shutdownReceived(){return Gt},set shutdownReceived(t){Gt=t},exit:t=>{br(),process.exit(t)}};function Ff(t,e,n,r){let i,d,y,_;return t!==void 0&&t.__brand==="features"&&(i=t,t=e,e=n,n=r),St.ConnectionStrategy.is(t)||St.ConnectionOptions.is(t)?_=t:(d=t,y=e,_=n),Mf(d,y,_,i)}Te.createConnection=Ff;function Mf(t,e,n,r){if(!t&&!e&&process.argv.length>2){let _,P,D=process.argv.slice(2);for(let w=0;w<D.length;w++){let N=D[w];if(N==="--node-ipc"){t=new St.IPCMessageReader(process),e=new St.IPCMessageWriter(process);break}else if(N==="--stdio"){t=process.stdin,e=process.stdout;break}else if(N==="--socket"){_=parseInt(D[w+1]);break}else if(N==="--pipe"){P=D[w+1];break}else{var i=N.split("=");if(i[0]==="--socket"){_=parseInt(i[1]);break}else if(i[0]==="--pipe"){P=i[1];break}}}if(_){let w=(0,St.createServerSocketTransport)(_);t=w[0],e=w[1]}else if(P){let w=(0,St.createServerPipeTransport)(P);t=w[0],e=w[1]}}var d="Use arguments of createConnection or set command line parameters: '--node-ipc', '--stdio' or '--socket={number}'";if(!t)throw new Error("Connection input stream is not set. "+d);if(!e)throw new Error("Connection output stream is not set. "+d);if(So.func(t.read)&&So.func(t.on)){let _=t;_.on("end",()=>{br(),process.exit(Gt?0:1)}),_.on("close",()=>{br(),process.exit(Gt?0:1)})}let y=_=>(0,St.createProtocolConnection)(t,e,_,n);return(0,Nf.createConnection)(y,jf,r)}});var Ma=T((lg,Fa)=>{"use strict";Fa.exports=ja()});var La=T((xa,vr)=>{(function(t){if(typeof vr=="object"&&typeof vr.exports=="object"){var e=t(require,xa);e!==void 0&&(vr.exports=e)}else typeof define=="function"&&define.amd&&define(["require","exports"],t)})(function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TextDocument=void 0;class n{constructor(D,w,N,S){this._uri=D,this._languageId=w,this._version=N,this._content=S,this._lineOffsets=void 0}get uri(){return this._uri}get languageId(){return this._languageId}get version(){return this._version}getText(D){if(D){let w=this.offsetAt(D.start),N=this.offsetAt(D.end);return this._content.substring(w,N)}return this._content}update(D,w){for(let N of D)if(n.isIncremental(N)){let S=y(N.range),H=this.offsetAt(S.start),U=this.offsetAt(S.end);this._content=this._content.substring(0,H)+N.text+this._content.substring(U,this._content.length);let z=Math.max(S.start.line,0),X=Math.max(S.end.line,0),M=this._lineOffsets,p=d(N.text,!1,H);if(X-z===p.length)for(let q=0,x=p.length;q<x;q++)M[q+z+1]=p[q];else p.length<1e4?M.splice(z+1,X-z,...p):this._lineOffsets=M=M.slice(0,z+1).concat(p,M.slice(X+1));let h=N.text.length-(U-H);if(h!==0)for(let q=z+1+p.length,x=M.length;q<x;q++)M[q]=M[q]+h}else if(n.isFull(N))this._content=N.text,this._lineOffsets=void 0;else throw new Error("Unknown change event received");this._version=w}getLineOffsets(){return this._lineOffsets===void 0&&(this._lineOffsets=d(this._content,!0)),this._lineOffsets}positionAt(D){D=Math.max(Math.min(D,this._content.length),0);let w=this.getLineOffsets(),N=0,S=w.length;if(S===0)return{line:0,character:D};for(;N<S;){let U=Math.floor((N+S)/2);w[U]>D?S=U:N=U+1}let H=N-1;return{line:H,character:D-w[H]}}offsetAt(D){let w=this.getLineOffsets();if(D.line>=w.length)return this._content.length;if(D.line<0)return 0;let N=w[D.line],S=D.line+1<w.length?w[D.line+1]:this._content.length;return Math.max(Math.min(N+D.character,S),N)}get lineCount(){return this.getLineOffsets().length}static isIncremental(D){let w=D;return w!=null&&typeof w.text=="string"&&w.range!==void 0&&(w.rangeLength===void 0||typeof w.rangeLength=="number")}static isFull(D){let w=D;return w!=null&&typeof w.text=="string"&&w.range===void 0&&w.rangeLength===void 0}}var r;(function(P){function D(S,H,U,z){return new n(S,H,U,z)}P.create=D;function w(S,H,U){if(S instanceof n)return S.update(H,U),S;throw new Error("TextDocument.update: document must be created by TextDocument.create")}P.update=w;function N(S,H){let U=S.getText(),z=i(H.map(_),(p,h)=>{let q=p.range.start.line-h.range.start.line;return q===0?p.range.start.character-h.range.start.character:q}),X=0,M=[];for(let p of z){let h=S.offsetAt(p.range.start);if(h<X)throw new Error("Overlapping edit");h>X&&M.push(U.substring(X,h)),p.newText.length&&M.push(p.newText),X=S.offsetAt(p.range.end)}return M.push(U.substr(X)),M.join("")}P.applyEdits=N})(r=e.TextDocument||(e.TextDocument={}));function i(P,D){if(P.length<=1)return P;let w=P.length/2|0,N=P.slice(0,w),S=P.slice(w);i(N,D),i(S,D);let H=0,U=0,z=0;for(;H<N.length&&U<S.length;)D(N[H],S[U])<=0?P[z++]=N[H++]:P[z++]=S[U++];for(;H<N.length;)P[z++]=N[H++];for(;U<S.length;)P[z++]=S[U++];return P}function d(P,D,w=0){let N=D?[w]:[];for(let S=0;S<P.length;S++){let H=P.charCodeAt(S);(H===13||H===10)&&(H===13&&S+1<P.length&&P.charCodeAt(S+1)===10&&S++,N.push(w+S+1))}return N}function y(P){let D=P.start,w=P.end;return D.line>w.line||D.line===w.line&&D.character>w.character?{start:w,end:D}:P}function _(P){let D=y(P.range);return D!==P.range?{newText:P.newText,range:D}:P}})});var Se=Nn(Ma()),Aa=Nn(La()),Ha=Nn(require("node:child_process")),za=require("node:os"),Rr=Nn(require("node:path")),$a=require("node:fs/promises");var xf=/:(\d+): (\w+): (.+)\r?$/;async function Ia(t,e,n){n.console.info(`Parsing diagnostics from ${t}`);let r=[],i="";for await(let d of e){i+=d;let y=i.split(`
`);i=y.pop();for(let _ of y){let P=xf.exec(_);if(!P){n.console.warn(`Could not parse diagnostic: ${_}`);continue}let[,D,w,N]=P,S={line:Number(D),isWarning:w==="warning",message:N};n.console.info(`Parsed ${w} diagnostic on line ${D} with message "${N}"`),r.push({line:Number(D),isWarning:w==="warning",message:N})}}return r}var Ba=require("node:fs"),qe=(0,Se.createConnection)(Se.ProposedFeatures.all),Kt=new Se.TextDocuments(Aa.TextDocument),Wa=!1,Dr=!1;qe.onInitialize(t=>{let{capabilities:e}=t;Wa=Boolean(e.workspace?.workspaceFolders),Dr=Boolean(e.workspace?.configuration);let n={capabilities:{textDocumentSync:Se.TextDocumentSyncKind.Incremental}};return Wa&&(n.capabilities.workspace={workspaceFolders:{supported:!0}}),n});qe.onInitialized(()=>{Dr&&qe.client.register(Se.DidChangeConfigurationNotification.type,{section:"nasm"})});var Ua={validate:!0,outputFormat:"bin",reportWarnings:!0,extraFlags:[],checkOnType:!1,nasmPath:"nasm"},Va=Ua,_r=new Map;function Lf(t,e){let n=t.split(`
`);if(e>n.length)throw new Error(`Line ${e} is out of bounds`);let r=n.slice(0,e-1).join(`
`).length+1,i=r+n[e-1].length;return[r,i]}var No=Rr.join((0,za.tmpdir)(),"nasmValidator");try{(0,Ba.mkdirSync)(No)}catch(t){if(t.code!=="EEXIST")throw t}function If(t,e){let n=Ha.spawn(t,e);return new Promise((r,i)=>{n.on("error",i),n.on("spawn",()=>r(n))})}async function Ja(t){if(!Dr)return Va;let e=_r.get(t);try{if(e)return await e}catch{}let n=qe.workspace.getConfiguration({scopeUri:t,section:"nasm"});return _r.set(t,n),await n}async function Ga(t,e){if(qe.console.info("validating source code"),!e.validate)return await qe.sendDiagnostics({uri:t.uri,diagnostics:[]});let n=t.getText(),r="in.asm",i=Rr.join(No,r);await(0,$a.writeFile)(i,n),qe.console.info(`wrote source file to ${i}, spawning nasm`);let d=await If(e.nasmPath,["-o",Rr.join(No,"out.o"),"-f",e.outputFormat,...e.extraFlags,i]),y=(await Ia(r,d.stderr,qe)).filter(_=>!_.isWarning||e.reportWarnings).map(_=>{let[P,D]=Lf(n,_.line);return{message:_.message,range:{start:t.positionAt(P),end:t.positionAt(D)},severity:_.isWarning?Se.DiagnosticSeverity.Warning:Se.DiagnosticSeverity.Error,source:"nasm"}});qe.console.log(`finished calculating ${y.length} diagnostics, sending`),await qe.sendDiagnostics({uri:t.uri,diagnostics:y})}qe.onDidChangeConfiguration(t=>{Dr?_r.clear():Va=t.settings.nasm??Ua,qe.console.info("Revalidating all documents due to configuration change");for(let e of Kt.all())(async()=>{let n=await Ja(e.uri);await Ga(e,n)})().catch(n=>qe.console.error(String(n)))});Kt.onDidClose(t=>{_r.delete(t.document.uri)});var Oo=(t,e)=>{(async()=>{let n=await Ja(e.document.uri);(!t||n.checkOnType)&&await Ga(e.document,n)})().catch(n=>qe.console.error(String(n)))};Kt.onDidSave(Oo.bind(null,!1));Kt.onDidOpen(Oo.bind(null,!1));Kt.onDidChangeContent(Oo.bind(null,!0));Kt.listen(qe);qe.listen();
